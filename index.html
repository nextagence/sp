
      
        
          <meta charset="UTF-8">
          <meta name="viewport" content="width=device-width, initial-scale=1.0">
          <title>PREDICTOR IA</title>
          <script src="https://cdn.tailwindcss.com"></script>
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
          <link rel="preconnect" href="https://fonts.googleapis.com">
          <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
          <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&amp;display=swap" rel="stylesheet">
          <style>
            body {
              font-family: "Share Tech Mono", monospace; /* Keep original font unless specified */
              text-shadow: 0 0 3px rgba(57, 255, 20, 0.4);
              background-color: #000;
              overflow-x: hidden;
              color: rgb(74 222 128 / 1);
            }
            .cursor::after {
              content: "_";
              animation: blink 1s step-end infinite;
            }
            @keyframes blink {
              50% {
                opacity: 0;
              }
            }
            .hacker-input:focus {
              box-shadow: 0 0 15px rgba(57, 255, 20, 0.6);
            }
            .blinking-red {
              color: #ef4444;
              animation: blink-red 1.5s step-end infinite;
            }
            @keyframes blink-red {
              50% {
                opacity: 0.5;
              }
            }
            .shake {
              animation: shake 0.5s cubic-bezier(0.36, 0.07, 0.19, 0.97) both;
            }
            @keyframes shake {
              10%,
              90% {
                transform: translate3d(-1px, 0, 0);
              }
              20%,
              80% {
                transform: translate3d(2px, 0, 0);
              }
              30%,
              50%,
              70% {
                transform: translate3d(-4px, 0, 0);
              }
              40%,
              60% {
                transform: translate3d(4px, 0, 0);
              }
            }
            .signal-card {
              transition: transform 0.3s ease, box-shadow 0.3s ease;
            }
            .signal-card:hover:not(.locked-card) {
              transform: translateY(-5px);
              box-shadow: 0 0 25px rgba(57, 255, 20, 0.5);
            }
            #chat-widget {
              transition: all 0.3s ease-in-out;
            }
            #chat-messages::-webkit-scrollbar {
              width: 4px;
            }
            #chat-messages::-webkit-scrollbar-track {
              background: #1a1a1a;
            }
            #chat-messages::-webkit-scrollbar-thumb {
              background: #00ff00;
            }
            #live-feed-container {
              /* Original gradient for LTR */
              mask-image: linear-gradient(
                to right,
                transparent,
                black 5%,
                black 95%,
                transparent
              );
              -webkit-mask-image: linear-gradient(
                to right,
                transparent,
                black 5%,
                black 95%,
                transparent
              );
            }
            .winner-item {
              /* Original animation for LTR */
              animation: slideInFromLeft 0.5s ease-out forwards;
              gap: 10px;
            }
            /* Original animation keyframe for LTR */
            @keyframes slideInFromLeft {
              from {
                opacity: 0;
                transform: translateX(-30px);
              }
              to {
                opacity: 1;
                transform: translateX(0);
              }
            }
            .btn-disabled {
              background-color: #4a5568;
              cursor: not-allowed;
              color: #a0aec0;
            }
            .multiplier-rising {
              text-shadow: 0 0 20px rgba(255, 255, 255, 0.8);
              color: #63b3ed;
            }
            .multiplier-final {
              color: #48bb78;
              text-shadow: 0 0 20px rgba(72, 187, 120, 0.8);
            }
            .custom-select-options {
              animation: fadeIn 0.2s ease-out;
            }
            @keyframes fadeIn {
              from {
                opacity: 0;
                transform: translateY(-10px);
              }
              to {
                opacity: 1;
                transform: translateY(0);
              }
            }
            .mine-cell {
              background-color: #1a202c;
              border-radius: 0.375rem;
              transition: all 0.3s ease-in-out;
              cursor: default;
            }
            .mine-cell.safe {
              background-image: url(https://www.freeiconspng.com/uploads/yellow-christmas-star-png-18.png);
              background-size: 70%;
              background-position: center;
              background-repeat: no-repeat;
              background-color: #38a169;
              transform: scale(1.05);
              box-shadow: 0 0 15px rgba(56, 161, 105, 0.7);
            }
            .game-console {
              background-color: #0d1117;
              border-color: #30363d;
              height: 8rem;
            }
            .game-console p {
              animation: fadeInConsole 0.3s ease-in;
              color: #a5d6ff;
            }
            .game-console p.success {
              color: #56d364;
            }
            .game-console p.error {
              color: #f85149;
            }
            @keyframes fadeInConsole {
              from {
                opacity: 0;
              }
              to {
                opacity: 1;
              }
            }
            .penalty-gate-post {
              background-color: #a0aec0;
            }
            .penalty-target-zone {
              background-color: rgba(255, 255, 255, 0.1);
              border: 2px dashed rgba(255, 255, 255, 0.2);
              transition: all 0.3s ease-in-out;
            }
            .penalty-target-zone.highlight {
              background-color: rgba(56, 161, 105, 0.8);
              border-color: #f6e05e;
              box-shadow: 0 0 25px rgba(56, 161, 105, 0.9);
            }
            .number-signal-display {
              color: #48bb78;
              text-shadow: 0 0 20px rgba(72, 187, 120, 0.8);
            }
            #chicken-road-viewport {
              overflow: hidden;
              background: linear-gradient(to bottom, #1a202c, #2d3748);
            }
            #chicken-road-track {
              transition: transform 0.2s linear;
            }
            .chicken-stove {
              background-color: #4a5568;
              border: 2px solid #718096;
              box-shadow: 0 4px 0 #2d3748;
            }
            #chicken-icon {
              transition: transform 0.2s ease-out;
              z-index: 10;
            }
            .locked-card {
              cursor: not-allowed;
              pointer-events: none;
            }
            /* Animation for the Lottery button */
            .shimmer-btn {
              position: relative;
              overflow: hidden;
              background: #1a202c; /* Base color */
              border: 1px solid #f6e05e;
              color: #f6e05e;
              transition: all 0.3s;
            }
            .shimmer-btn:hover {
              box-shadow: 0 0 15px rgba(246, 224, 94, 0.6);
            }
            .shimmer-btn::before {
              content: "";
              position: absolute;
              top: 0;
              /* Original LTR position */
              left: -150%;
              width: 75%;
              height: 100%;
              background: linear-gradient(
                /* Original LTR direction */ 90deg,
                transparent,
                rgba(246, 224, 94, 0.4),
                transparent
              );
              /* Original LTR animation */
              animation: shimmer 5s infinite linear;
            }
            /* Original LTR shimmer animation */
            @keyframes shimmer {
              0% {
                transform: translateX(0);
              }
              100% {
                transform: translateX(350%);
              }
            }
            .blinking-text {
              animation: blink-gray-red 1.5s infinite;
            }
            @keyframes blink-gray-red {
              0%,
              100% {
                color: #6b7280;
              } /* gray-500 */
              50% {
                color: #ef4444;
              } /* red-500 */
            }
            .locked-card .card-image {
              filter: blur(4px);
              transform: scale(1.1);
            }
            /* LTR adjustments (default) */
            /* Ensure margins are correct for LTR */
            .mr-4 {
              margin-right: 1rem;
            }
            .ml-4 {
              margin-left: 1rem;
            }
            .mr-2 {
              margin-right: 0.5rem;
            }
            .ml-2 {
              margin-left: 0.5rem;
            }
            #wheel-pointer {
              /* Original LTR wheel pointer */
              right: -4px; /* Position on the right */
              left: auto;
              border-left: 25px solid #dc2626; /* red-600 */
              border-right: 0;
              border-top: 15px solid transparent;
              border-bottom: 15px solid transparent;
              transform: translateY(-50%) rotate(180deg); /* Point left */
            }
            @media (min-width: 640px) {
              #wheel-pointer {
                border-left-width: 30px;
                border-top-width: 20px;
                border-bottom-width: 20px;
              }
            }
          </style>
        
        
          <div id="main-content" class="min-h-screen flex flex-col items-center justify-center p-4">
            <header class="text-center mb-12">
              <h1 class="text-3xl md:text-5xl tracking-widest cursor-default">
                <span id="typing-text">PREDICTOR IA</span><span class="cursor"></span>
              </h1>
            </header>
            <button id="openModalBtn" class="bg-transparent border-2 border-green-400 text-green-400 px-8 py-3 text-lg hover:bg-green-400 hover:text-black transition-all duration-300 active:scale-95 shadow-lg shadow-green-500/20 hover:shadow-green-500/40">
              OBTENER SEÑALES IA
            </button>
          </div>
          <div id="app-container" class="hidden min-h-screen container mx-auto p-4 md:p-8">
            <div class="w-full flex justify-end items-center mb-4">
              <button id="lotteryBtn" class="shimmer-btn rounded-md px-4 py-2 text-sm mr-4">
                <i class="fas fa-star mr-2"></i>LOTERÍA
              </button>
              <button id="logoutBtn" class="bg-red-600 text-white px-4 py-2 text-sm rounded-md hover:bg-red-500 transition-colors active:scale-95">
                <i class="fas fa-sign-out-alt mr-2"></i>Cerrar sesión
              </button>
            </div>
            <div id="live-feed-section" class="mb-8">
              <h3 class="text-center text-xl mb-4 tracking-widest flex items-center justify-center">
                // MIS ESTUDIANTES //
                <span class="bg-red-600 text-white text-xs font-bold px-2 py-1 rounded ml-2 animate-pulse">EN VIVO</span>
              </h3>
              <div id="live-feed-container" class="h-24 bg-black/30 border border-green-800 rounded-md p-2 flex items-center space-x-4 overflow-x-hidden"></div>
            </div>
            <div id="signals-section" class="">
              <h2 class="text-3xl md:text-4xl text-center mb-10 tracking-widest">
                // SEÑALES IA //
              </h2>
              <div id="cards-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-6">
                <div class="signal-card locked-card bg-[#0d0d0d] border border-yellow-700 rounded-lg overflow-hidden flex flex-col" data-card-type="vip" data-game="vip">
                  <div class="w-full h-48 overflow-hidden relative">
                    <img src="" alt="" class="card-image w-full h-full object-cover transition-all duration-300">
                    <div class="banner-container absolute inset-0 flex items-center justify-center">
                      <div class="absolute w-[150%] bg-red-600 text-white text-center font-bold py-2 -rotate-12 text-sm shadow-lg">
                        NECESITAS OTRO CÓDIGO DE ACCESO
                      </div>
                    </div>
                  </div>
                  <div class="p-4 flex flex-col flex-grow text-center">
                    <h3 class="card-title text-lg font-bold mb-2 flex-grow text-yellow-300" style="text-shadow: 0 0 8px #f6e05e"></h3>
                    <p id="stats-vip" class="text-sm text-gray-400 mb-3 font-mono leading-tight">
                      // Cargando datos... //
                    </p>
                    <button class="w-full mt-auto bg-gray-600 text-gray-400 px-4 py-2 cursor-not-allowed" disabled="">
                      ACTIVAR
                    </button>
                  </div>
                </div>

                <div class="signal-card bg-[#0d0d0d] border border-green-700 rounded-lg overflow-hidden flex flex-col" data-game="aviator">
                  <img src="" alt="" class="card-image w-full h-48 object-cover">
                  <div class="p-4 flex flex-col flex-grow text-center">
                    <h3 class="card-title text-lg font-bold mb-2 flex-grow"></h3>
                    <p id="stats-aviator" class="text-sm text-gray-400 mb-3 font-mono leading-tight">
                      // Cargando datos... //
                    </p>
                    <button class="activate-btn w-full mt-auto bg-green-600 text-black px-4 py-2 hover:bg-green-500 transition-all duration-300 active:scale-95">
                      ACTIVAR
                    </button>
                  </div>
                </div>

                <div class="signal-card bg-[#0d0d0d] border border-green-700 rounded-lg overflow-hidden flex flex-col" data-game="mines">
                  <img src="" alt="" class="card-image w-full h-48 object-cover">
                  <div class="p-4 flex flex-col flex-grow text-center">
                    <h3 class="card-title text-lg font-bold mb-2 flex-grow"></h3>
                    <p id="stats-mines" class="text-sm text-gray-400 mb-3 font-mono leading-tight">
                      // Cargando datos... //
                    </p>
                    <button class="activate-btn w-full mt-auto bg-green-600 text-black px-4 py-2 hover:bg-green-500 transition-all duration-300 active:scale-95">
                      ACTIVAR
                    </button>
                  </div>
                </div>

                <div class="signal-card bg-[#0d0d0d] border border-green-700 rounded-lg overflow-hidden flex flex-col" data-game="penalty">
                  <img src="" alt="" class="card-image w-full h-48 object-cover">
                  <div class="p-4 flex flex-col flex-grow text-center">
                    <h3 class="card-title text-lg font-bold mb-2 flex-grow"></h3>
                    <p id="stats-penalty" class="text-sm text-gray-400 mb-3 font-mono leading-tight">
                      // Cargando datos... //
                    </p>
                    <button class="activate-btn w-full mt-auto bg-green-600 text-black px-4 py-2 hover:bg-green-500 transition-all duration-300 active:scale-95">
                      ACTIVAR
                    </button>
                  </div>
                </div>

                <div class="signal-card bg-[#0d0d0d] border border-green-700 rounded-lg overflow-hidden flex flex-col" data-game="apple">
                  <img src="" alt="" class="card-image w-full h-48 object-cover">
                  <div class="p-4 flex flex-col flex-grow text-center">
                    <h3 class="card-title text-lg font-bold mb-2 flex-grow"></h3>
                    <p id="stats-apple" class="text-sm text-gray-400 mb-3 font-mono leading-tight">
                      // Cargando datos... //
                    </p>
                    <button class="activate-btn w-full mt-auto bg-green-600 text-black px-4 py-2 hover:bg-green-500 transition-all duration-300 active:scale-95">
                      ACTIVAR
                    </button>
                  </div>
                </div>

                <div class="signal-card bg-[#0d0d0d] border border-green-700 rounded-lg overflow-hidden flex flex-col" data-game="chicken">
                  <img src="" alt="" class="card-image w-full h-48 object-cover">
                  <div class="p-4 flex flex-col flex-grow text-center">
                    <h3 class="card-title text-lg font-bold mb-2 flex-grow"></h3>
                    <p id="stats-chicken" class="text-sm text-gray-400 mb-3 font-mono leading-tight">
                      // Cargando datos... //
                    </p>
                    <button class="activate-btn w-full mt-auto bg-green-600 text-black px-4 py-2 hover:bg-green-500 transition-all duration-300 active:scale-95">
                      ACTIVAR
                    </button>
                  </div>
                </div>
              </div>
            </div>
            <div id="game-view" class="hidden">
              <div id="game-screen-vip" class="game-screen hidden flex-col items-center justify-center">
                <div class="w-full relative min-h-[60vh] flex flex-col items-center justify-center bg-black/30 border border-yellow-500 rounded-md p-8 pt-16 pb-8 text-center">
                  <div class="absolute top-4 left-4">
                    <button class="back-to-signals-btn text-yellow-400 hover:text-yellow-300 transition-colors bg-transparent border border-yellow-400 rounded px-3 py-1 text-sm hover:bg-yellow-400 hover:text-black">
                      &lt;-- Volver
                    </button>
                  </div>
                  <h2 class="game-title text-3xl sm:text-4xl text-yellow-300 mb-6 font-bold" style="text-shadow: 0 0 8px #f6e05e"></h2>
                  <div class="max-w-xl text-lg text-gray-300 space-y-4">
                    <p>
                      ¡Felicidades por obtener el predictor más raro, amigo mío!
                    </p>
                    <p>
                      ¡El predictor que acabas de recibir utiliza las últimas
                      tecnologías de IA para pronosticar apuestas deportivas!
                    </p>
                    <p>
                      ¡Ahora, gracias a la IA, puedes predecir el ganador en
                      eventos deportivos con un 99% de precisión!
                    </p>
                    <p>
                      Utilizamos la IA más nueva, que solo está disponible para
                      nosotros en acceso privado.
                    </p>
                    <p class="font-bold text-green-400">
                      ¡Escríbeme para que pueda darte predicciones con nuestra
                      IA!
                    </p>
                  </div>
                  <a id="vip-send-message-link" href="#" class="mt-8 bg-green-600 text-black px-8 py-3 text-lg hover:bg-green-500 transition-all duration-300 active:scale-95 rounded-md font-bold">
                    ENVIAR MENSAJE
                  </a>
                </div>
              </div>

              <div id="game-screen-slot" class="game-screen hidden flex-col items-center justify-center">
                <div class="video-tutorial-section w-full p-4">
                  <div class="flex justify-start w-full mb-4">
                    <button class="back-to-signals-btn text-yellow-400 hover:text-yellow-300 transition-colors bg-transparent border border-yellow-400 rounded px-3 py-1 text-sm hover:bg-yellow-400 hover:text-black">
                      &lt;-- Volver
                    </button>
                  </div>
                  <h3 class="text-3xl text-center text-cyan-300 mb-6">
                    Primero, encuentra el juego 'Slot'
                  </h3>
                  <div class="flex flex-col md:flex-row gap-6 justify-center items-start">
                    <div class="w-full md:w-1/2">
                      <h4 class="text-center mb-2 text-lg">
                        CÓMO ENCONTRAR 'SLOTS' EN LA WEB
                      </h4>
                      <div class="aspect-video bg-black border border-cyan-700 rounded-lg overflow-hidden">
                        <iframe class="w-full h-full" id="slot-find-game-web-iframe" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen=""></iframe>
                      </div>
                    </div>
                    <div class="w-full md:w-1/2">
                      <h4 class="text-center mb-2 text-lg">
                        CÓMO ENCONTRAR 'SLOTS' EN LA APP
                      </h4>
                      <div class="aspect-video bg-black border border-cyan-700 rounded-lg overflow-hidden">
                        <iframe class="w-full h-full" id="slot-find-game-app-iframe" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen=""></iframe>
                      </div>
                    </div>
                  </div>
                  <div class="text-center mt-8">
                    <button class="i-found-game-btn bg-green-600 text-black px-8 py-3 text-lg hover:bg-green-500 transition-all duration-300 active:scale-95 rounded-md font-bold">
                      ENCONTRÉ EL JUEGO
                    </button>
                  </div>
                </div>

                <div class="predictor-section hidden w-full relative min-h-[60vh] flex-col items-center justify-center bg-black/30 border border-green-800 rounded-md p-4 pt-16 pb-8">
                  <div class="absolute top-4 left-4">
                    <button class="back-to-signals-btn text-yellow-400 hover:text-yellow-300 transition-colors bg-transparent border border-yellow-400 rounded px-3 py-1 text-sm hover:bg-yellow-400 hover:text-black">
                      &lt;-- Volver
                    </button>
                  </div>
                  <h3 class="game-title text-3xl sm:text-4xl text-center mb-4 px-12 sm:px-0 mt-8 sm:mt-0"></h3>
                  <div class="mb-2 py-4 flex-grow flex items-center justify-center">
                    <p id="slot-signal-display" class="text-3xl sm:text-4xl md:text-5xl font-mono text-center text-white transition-colors duration-500 px-4">
                      GIRA
                      <span id="slot-number" class="slot-number text-yellow-400" style="text-shadow: 0 0 15px rgba(250, 204, 21, 0.7)">#</span>
                      VECES
                    </p>
                  </div>

                  <p id="slot-bet-suggestion" class="bet-suggestion-text text-center text-yellow-400 h-8 my-6 text-sm sm:text-xl font-bold px-2"></p>

                  <div id="slot-actions-initial" class="slot-actions-initial flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4 w-full max-w-md">
                    <button id="slot-get-bet-btn" class="slot-get-bet-btn flex-1 bg-green-600 text-black px-4 py-2 text-base hover:bg-green-500 transition-all duration-300 active:scale-95 rounded-md">
                      Obtener Tamaño de Apuesta
                    </button>
                    <button id="slot-get-signal-btn" class="slot-get-signal-btn flex-1 px-4 py-2 text-base transition-all duration-300 active:scale-95 rounded-md btn-disabled" disabled="">
                      Obtener Señal
                    </button>
                  </div>

                  <button id="slot-get-another-btn" class="slot-get-another-btn hidden w-full max-w-md bg-yellow-500 text-black px-4 py-2 text-base hover:bg-yellow-400 transition-all duration-300 active:scale-95 rounded-md">
                    OBTENER OTRA SEÑAL
                  </button>

                  <div id="slot-console" class="game-console w-full max-w-md border rounded-md mt-6 p-2 font-mono text-xs overflow-y-auto">
                    <div></div>
                  </div>
                </div>
              </div>

              <div id="game-screen-aviator" class="game-screen hidden flex-col items-center justify-center">
                <div class="video-tutorial-section w-full p-4">
                  <div class="flex justify-start w-full mb-4">
                    <button class="back-to-signals-btn text-yellow-400 hover:text-yellow-300 transition-colors bg-transparent border border-yellow-400 rounded px-3 py-1 text-sm hover:bg-yellow-400 hover:text-black">
                      &lt;-- Volver
                    </button>
                  </div>
                  <h3 class="text-3xl text-center text-cyan-300 mb-6">
                    Primero, encuentra el juego "Aviator"
                  </h3>
                  <div class="flex flex-col md:flex-row gap-6 justify-center items-start">
                    <div class="w-full md:w-1/2">
                      <h4 class="text-center mb-2 text-lg">
                        CÓMO ENCONTRAR "AVIATOR" EN LA WEB
                      </h4>
                      <div class="aspect-video bg-black border border-cyan-700 rounded-lg overflow-hidden">
                        <iframe class="w-full h-full" id="aviator-find-game-web-iframe" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen=""></iframe>
                      </div>
                    </div>
                    <div class="w-full md:w-1/2">
                      <h4 class="text-center mb-2 text-lg">
                        CÓMO ENCONTRAR "AVIATOR" EN LA APP
                      </h4>
                      <div class="aspect-video bg-black border border-cyan-700 rounded-lg overflow-hidden">
                        <iframe class="w-full h-full" id="aviator-find-game-app-iframe" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen=""></iframe>
                      </div>
                    </div>
                  </div>
                  <div class="text-center mt-8">
                    <button class="i-found-game-btn bg-green-600 text-black px-8 py-3 text-lg hover:bg-green-500 transition-all duration-300 active:scale-95 rounded-md font-bold">
                      ENCONTRÉ EL JUEGO
                    </button>
                  </div>
                </div>
                <div class="predictor-section hidden w-full relative min-h-[60vh] flex flex-col items-center justify-center bg-black/30 border border-green-800 rounded-md p-4 pt-16 pb-8">
                  <div class="absolute top-4 left-4">
                    <button class="back-to-signals-btn text-yellow-400 hover:text-yellow-300 transition-colors bg-transparent border border-yellow-400 rounded px-3 py-1 text-sm hover:bg-yellow-400 hover:text-black">
                      &lt;-- Volver
                    </button>
                  </div>
                  <div class="absolute top-4 right-4 flex flex-col sm:flex-row gap-2">
                    <button class="open-video-btn text-orange-400 hover:text-orange-300 bg-transparent border border-orange-400 rounded px-4 py-2 text-base hover:bg-orange-400 hover:text-black font-bold transition-all active:scale-95" data-videos-key="howToUse" data-game-key="aviator">
                      CÓMO USAR EL PREDICTOR
                    </button>
                  </div>
                  <h3 class="game-title text-3xl sm:text-4xl text-center mb-4 px-12 sm:px-0 mt-8 sm:mt-0"></h3>
                  <div class="mb-2 py-4">
                    <p id="aviator-multiplier" class="text-7xl md:text-9xl font-mono text-center text-white transition-colors duration-500">
                      x1.00
                    </p>
                  </div>
                  <p id="aviator-bet-suggestion" class="bet-suggestion-text text-center text-yellow-400 h-8 my-6 text-sm sm:text-xl font-bold px-2"></p>
                  <div id="aviator-actions-initial" class="flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4 w-full max-w-md">
                    <button id="aviator-get-bet-btn" class="flex-1 bg-green-600 text-black px-4 py-2 text-base hover:bg-green-500 transition-all duration-300 active:scale-95 rounded-md">
                      Obtener Tamaño de Apuesta
                    </button>
                    <button id="aviator-get-signal-btn" class="flex-1 px-4 py-2 text-base transition-all duration-300 active:scale-95 rounded-md btn-disabled" disabled="">
                      Obtener Señal
                    </button>
                  </div>
                  <button id="aviator-get-another-btn" class="hidden w-full max-w-md bg-yellow-500 text-black px-4 py-2 text-base hover:bg-yellow-400 transition-all duration-300 active:scale-95 rounded-md">
                    OBTENER OTRA SEÑAL
                  </button>
                  <div id="aviator-console" class="game-console w-full max-w-md border rounded-md mt-6 p-2 font-mono text-xs overflow-y-auto">
                    <div></div>
                  </div>
                </div>
              </div>

              <div id="game-screen-mines" class="game-screen hidden flex-col items-center justify-center">
                <div class="video-tutorial-section w-full p-4">
                  <div class="flex justify-start w-full mb-4">
                    <button class="back-to-signals-btn text-yellow-400 hover:text-yellow-300 transition-colors bg-transparent border border-yellow-400 rounded px-3 py-1 text-sm hover:bg-yellow-400 hover:text-black">
                      &lt;-- Volver
                    </button>
                  </div>
                  <h3 class="text-3xl text-center text-cyan-300 mb-6">
                    Primero, encuentra el juego "Mines"
                  </h3>
                  <div class="flex flex-col md:flex-row gap-6 justify-center items-start">
                    <div class="w-full md:w-1/2">
                      <h4 class="text-center mb-2 text-lg">
                        CÓMO ENCONTRAR "MINES" EN LA WEB
                      </h4>
                      <div class="aspect-video bg-black border border-cyan-700 rounded-lg overflow-hidden">
                        <iframe class="w-full h-full" id="mines-find-game-web-iframe" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen=""></iframe>
                      </div>
                    </div>
                    <div class="w-full md:w-1/2">
                      <h4 class="text-center mb-2 text-lg">
                        CÓMO ENCONTRAR "MINES" EN LA APP
                      </h4>
                      <div class="aspect-video bg-black border border-cyan-700 rounded-lg overflow-hidden">
                        <iframe class="w-full h-full" id="mines-find-game-app-iframe" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen=""></iframe>
                      </div>
                    </div>
                  </div>
                  <div class="text-center mt-8">
                    <button class="i-found-game-btn bg-green-600 text-black px-8 py-3 text-lg hover:bg-green-500 transition-all duration-300 active:scale-95 rounded-md font-bold">
                      ENCONTRÉ EL JUEGO
                    </button>
                  </div>
                </div>
                <div class="predictor-section hidden w-full relative min-h-[60vh] flex flex-col items-center justify-center bg-black/30 border border-green-800 rounded-md p-4 pt-16 pb-8">
                  <button class="back-to-signals-btn absolute top-4 left-4 text-yellow-400 hover:text-yellow-300 transition-colors bg-transparent border border-yellow-400 rounded px-3 py-1 text-sm hover:bg-yellow-400 hover:text-black">
                    &lt;-- Volver
                  </button>
                  <div class="absolute top-4 right-4 flex flex-col sm:flex-row gap-2">
                    <button class="open-video-btn text-orange-400 hover:text-orange-300 bg-transparent border border-orange-400 rounded px-4 py-2 text-base hover:bg-orange-400 hover:text-black font-bold transition-all active:scale-95" data-videos-key="howToUse" data-game-key="mines">
                      CÓMO USAR EL PREDICTOR
                    </button>
                  </div>
                  <h3 class="game-title text-3xl sm:text-4xl text-center mb-6 px-12 sm:px-0 mt-8 sm:mt-0"></h3>
                  <div class="flex flex-col sm:flex-row gap-6 mb-6 w-full max-w-lg">
                    <div class="relative flex-1" data-select-id="grid-size">
                      <label class="block text-sm text-gray-400 mb-1">Tamaño de Cuadrícula</label>
                      <button class="custom-select-trigger w-full bg-gray-900 border border-green-700 rounded p-3 flex justify-between items-center">
                        <span class="selected-option">5x5</span><i class="fas fa-chevron-down text-xs"></i>
                      </button>
                      <div class="custom-select-options hidden absolute top-full left-0 right-0 mt-1 bg-gray-900 border border-green-700 rounded-md z-10 overflow-hidden">
                        <div class="p-2 cursor-pointer hover:bg-green-800/50">
                          3x3
                        </div>
                        <div class="p-2 cursor-pointer hover:bg-green-800/50">
                          4x4
                        </div>
                        <div class="p-2 cursor-pointer hover:bg-green-800/50">
                          5x5
                        </div>
                        <div class="p-2 cursor-pointer hover:bg-green-800/50">
                          6x6
                        </div>
                        <div class="p-2 cursor-pointer hover:bg-green-800/50">
                          7x7
                        </div>
                      </div>
                    </div>
                    <div class="relative flex-1" data-select-id="mine-count">
                      <label class="block text-sm text-gray-400 mb-1">Cantidad de Minas</label>
                      <button class="custom-select-trigger w-full bg-gray-900 border border-green-700 rounded p-3 flex justify-between items-center">
                        <span class="selected-option">3</span><i class="fas fa-chevron-down text-xs"></i>
                      </button>
                      <div class="custom-select-options hidden absolute top-full left-0 right-0 mt-1 bg-gray-900 border border-green-700 rounded-md z-10 overflow-y-auto max-h-48">
                        <div class="p-2 cursor-pointer hover:bg-green-800/50">
                          1
                        </div>
                        <div class="p-2 cursor-pointer hover:bg-green-800/50">
                          2
                        </div>
                        <div class="p-2 cursor-pointer hover:bg-green-800/50">
                          3
                        </div>
                        <div class="p-2 cursor-pointer hover:bg-green-800/50">
                          4
                        </div>
                        <div class="p-2 cursor-pointer hover:bg-green-800/50">
                          5
                        </div>
                        <div class="p-2 cursor-pointer hover:bg-green-800/50">
                          6
                        </div>
                        <div class="p-2 cursor-pointer hover:bg-green-800/50">
                          7
                        </div>
                        <div class="p-2 cursor-pointer hover:bg-green-800/50">
                          10
                        </div>
                        <div class="p-2 cursor-pointer hover:bg-green-800/50">
                          15
                        </div>
                      </div>
                    </div>
                  </div>
                  <div id="mines-grid-container" class="w-full max-w-md aspect-square mb-6"></div>
                  <p id="mines-bet-suggestion" class="bet-suggestion-text text-center text-yellow-400 h-8 my-6 text-sm sm:text-xl font-bold p-2"></p>
                  <div id="mines-actions-initial" class="flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4 w-full max-w-md">
                    <button id="mines-get-bet-btn" class="flex-1 bg-green-600 text-black px-4 py-2 text-base hover:bg-green-500 transition-all duration-300 active:scale-95 rounded-md">
                      Obtener Tamaño de Apuesta
                    </button>
                    <button id="mines-get-signal-btn" class="flex-1 px-4 py-2 text-base transition-all duration-300 active:scale-95 rounded-md btn-disabled" disabled="">
                      Obtener Señal
                    </button>
                  </div>
                  <button id="mines-get-another-btn" class="hidden w-full max-w-md bg-yellow-500 text-black px-4 py-2 text-base hover:bg-yellow-400 transition-all duration-300 active:scale-95 rounded-md">
                    OBTENER OTRA SEÑAL
                  </button>
                  <div id="mines-console" class="game-console w-full max-w-md border rounded-md mt-6 p-2 font-mono text-xs overflow-y-auto">
                    <div></div>
                  </div>
                </div>
              </div>

              <div id="game-screen-penalty" class="game-screen hidden flex-col items-center justify-center">
                <div class="video-tutorial-section w-full p-4">
                  <div class="flex justify-start w-full mb-4">
                    <button class="back-to-signals-btn text-yellow-400 hover:text-yellow-300 transition-colors bg-transparent border border-yellow-400 rounded px-3 py-1 text-sm hover:bg-yellow-400 hover:text-black">
                      &lt;-- Volver
                    </button>
                  </div>
                  <h3 class="text-3xl text-center text-cyan-300 mb-6">
                    Primero, encuentra el juego "Penalty"
                  </h3>
                  <div class="flex flex-col md:flex-row gap-6 justify-center items-start">
                    <div class="w-full md:w-1/2">
                      <h4 class="text-center mb-2 text-lg">
                        CÓMO ENCONTRAR "PENALTY" EN LA WEB
                      </h4>
                      <div class="aspect-video bg-black border border-cyan-700 rounded-lg overflow-hidden">
                        <iframe class="w-full h-full" id="penalty-find-game-web-iframe" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen=""></iframe>
                      </div>
                    </div>
                    <div class="w-full md:w-1/2">
                      <h4 class="text-center mb-2 text-lg">
                        CÓMO ENCONTRAR "PENALTY" EN LA APP
                      </h4>
                      <div class="aspect-video bg-black border border-cyan-700 rounded-lg overflow-hidden">
                        <iframe class="w-full h-full" id="penalty-find-game-app-iframe" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen=""></iframe>
                      </div>
                    </div>
                  </div>
                  <div class="text-center mt-8">
                    <button class="i-found-game-btn bg-green-600 text-black px-8 py-3 text-lg hover:bg-green-500 transition-all duration-300 active:scale-95 rounded-md font-bold">
                      ENCONTRÉ EL JUEGO
                    </button>
                  </div>
                </div>
                <div class="predictor-section hidden w-full relative min-h-[60vh] flex flex-col items-center justify-center bg-black/30 border border-green-800 rounded-md p-4 pt-16 pb-8">
                  <button class="back-to-signals-btn absolute top-4 left-4 text-yellow-400 hover:text-yellow-300 transition-colors bg-transparent border border-yellow-400 rounded px-3 py-1 text-sm hover:bg-yellow-400 hover:text-black">
                    &lt;-- Volver
                  </button>
                  <div class="absolute top-4 right-4 flex flex-col sm:flex-row gap-2">
                    <button class="open-video-btn text-orange-400 hover:text-orange-300 bg-transparent border border-orange-400 rounded px-4 py-2 text-base hover:bg-orange-400 hover:text-black font-bold transition-all active:scale-95" data-videos-key="howToUse" data-game-key="penalty">
                      CÓMO USAR EL PREDICTOR
                    </button>
                  </div>
                  <h3 class="game-title text-3xl sm:text-4xl text-center mb-6 px-12 sm:px-0 mt-8 sm:mt-0"></h3>
                  <div class="relative w-full max-w-lg h-64 md:h-80 bg-gray-900/20 border-2 border-gray-600 mb-6">
                    <div class="penalty-gate-post absolute left-0 top-0 w-2 h-full"></div>
                    <div class="penalty-gate-post absolute right-0 top-0 w-2 h-full"></div>
                    <div class="penalty-gate-post absolute left-0 top-0 w-full h-2"></div>
                    <div data-zone="1" class="penalty-target-zone absolute top-4 left-4 w-16 h-16 md:w-20 md:h-20 rounded-full"></div>
                    <div data-zone="2" class="penalty-target-zone absolute top-4 right-4 w-16 h-16 md:w-20 md:h-20 rounded-full"></div>
                    <div data-zone="3" class="penalty-target-zone absolute top-4 left-1/2 -translate-x-1/2 w-16 h-16 md:w-20 md:h-20 rounded-full"></div>
                    <div data-zone="4" class="penalty-target-zone absolute bottom-4 left-4 w-16 h-16 md:w-20 md:h-20 rounded-full"></div>
                    <div data-zone="5" class="penalty-target-zone absolute bottom-4 right-4 w-16 h-16 md:w-20 md:h-20 rounded-full"></div>
                  </div>
                  <p id="penalty-bet-suggestion" class="bet-suggestion-text text-center text-yellow-400 h-8 my-6 text-sm sm:text-xl font-bold px-2"></p>
                  <div id="penalty-actions-initial" class="flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4 w-full max-w-md">
                    <button id="penalty-get-bet-btn" class="flex-1 bg-green-600 text-black px-4 py-2 text-base hover:bg-green-500 transition-all duration-300 active:scale-95 rounded-md">
                      Obtener Tamaño de Apuesta
                    </button>
                    <button id="penalty-get-signal-btn" class="flex-1 px-4 py-2 text-base transition-all duration-300 active:scale-95 rounded-md btn-disabled" disabled="">
                      Obtener Señal
                    </button>
                  </div>
                  <button id="penalty-start-new-game-btn" class="hidden w-full max-w-md bg-yellow-500 text-black px-6 py-3 text-lg hover:bg-yellow-400 transition-all duration-300 active:scale-95 rounded-md mt-4">
                    Empezar Nuevo Juego
                  </button>
                  <div id="penalty-console" class="game-console w-full max-w-md border rounded-md mt-6 p-2 font-mono text-xs overflow-y-auto">
                    <div></div>
                  </div>
                </div>
              </div>

              <div id="game-screen-apple" class="game-screen hidden flex-col items-center justify-center">
                <div class="video-tutorial-section w-full p-4">
                  <div class="flex justify-start w-full mb-4">
                    <button class="back-to-signals-btn text-yellow-400 hover:text-yellow-300 transition-colors bg-transparent border border-yellow-400 rounded px-3 py-1 text-sm hover:bg-yellow-400 hover:text-black">
                      &lt;-- Volver
                    </button>
                  </div>
                  <h3 class="text-3xl text-center text-cyan-300 mb-6">
                    Primero, encuentra el juego "Apple of Fortune"
                  </h3>
                  <div class="flex flex-col md:flex-row gap-6 justify-center items-start">
                    <div class="w-full md:w-1/2">
                      <h4 class="text-center mb-2 text-lg">
                        CÓMO ENCONTRAR "APPLE OF FORTUNE" EN LA WEB
                      </h4>
                      <div class="aspect-video bg-black border border-cyan-700 rounded-lg overflow-hidden">
                        <iframe class="w-full h-full" id="apple-find-game-web-iframe" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen=""></iframe>
                      </div>
                    </div>
                    <div class="w-full md:w-1/2">
                      <h4 class="text-center mb-2 text-lg">
                        CÓMO ENCONTRAR "APPLE OF FORTUNE" EN LA APP
                      </h4>
                      <div class="aspect-video bg-black border border-cyan-700 rounded-lg overflow-hidden">
                        <iframe class="w-full h-full" id="apple-find-game-app-iframe" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen=""></iframe>
                      </div>
                    </div>
                  </div>
                  <div class="text-center mt-8">
                    <button class="i-found-game-btn bg-green-600 text-black px-8 py-3 text-lg hover:bg-green-500 transition-all duration-300 active:scale-95 rounded-md font-bold">
                      ENCONTRÉ EL JUEGO
                    </button>
                  </div>
                </div>
                <div class="predictor-section hidden w-full relative min-h-[60vh] flex flex-col items-center justify-center bg-black/30 border border-green-800 rounded-md p-4 pt-16 pb-8">
                  <button class="back-to-signals-btn absolute top-4 left-4 text-yellow-400 hover:text-yellow-300 transition-colors bg-transparent border border-yellow-400 rounded px-3 py-1 text-sm hover:bg-yellow-400 hover:text-black">
                    &lt;-- Volver
                  </button>
                  <div class="absolute top-4 right-4 flex flex-col sm:flex-row gap-2">
                    <button class="open-video-btn text-orange-400 hover:text-orange-300 bg-transparent border border-orange-400 rounded px-4 py-2 text-base hover:bg-orange-400 hover:text-black font-bold transition-all active:scale-95" data-videos-key="howToUse" data-game-key="apple">
                      CÓMO USAR EL PREDICTOR
                    </button>
                  </div>
                  <h3 class="game-title text-3xl sm:text-4xl text-center mb-4 px-12 sm:px-0 mt-8 sm:mt-0"></h3>
                  <div class="flex-grow flex items-center justify-center">
                    <p id="apple-signal-display" class="text-9xl font-mono text-center text-white">
                      #
                    </p>
                  </div>
                  <p id="apple-bet-suggestion" class="bet-suggestion-text text-center text-yellow-400 h-8 my-6 text-sm sm:text-xl font-bold px-2"></p>
                  <div id="apple-actions-initial" class="flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4 w-full max-w-md">
                    <button id="apple-get-bet-btn" class="flex-1 bg-green-600 text-black px-4 py-2 text-base hover:bg-green-500 transition-all duration-300 active:scale-95 rounded-md">
                      Obtener Tamaño de Apuesta
                    </button>
                    <button id="apple-get-signal-btn" class="flex-1 px-4 py-2 text-base transition-all duration-300 active:scale-95 rounded-md btn-disabled" disabled="">
                      Obtener Señal
                    </button>
                  </div>
                  <button id="apple-start-new-game-btn" class="hidden w-full max-w-md bg-yellow-500 text-black px-6 py-3 text-lg hover:bg-yellow-400 transition-all duration-300 active:scale-95 rounded-md mt-4">
                    Empezar Nuevo Juego
                  </button>
                  <div id="apple-console" class="game-console w-full max-w-md border rounded-md mt-6 p-2 font-mono text-xs overflow-y-auto">
                    <div></div>
                  </div>
                </div>
              </div>

              <div id="game-screen-chicken" class="game-screen hidden flex-col items-center justify-center">
                <div class="video-tutorial-section w-full p-4">
                  <div class="flex justify-start w-full mb-4">
                    <button class="back-to-signals-btn text-yellow-400 hover:text-yellow-300 transition-colors bg-transparent border border-yellow-400 rounded px-3 py-1 text-sm hover:bg-yellow-400 hover:text-black">
                      &lt;-- Volver
                    </button>
                  </div>
                  <h3 class="text-3xl text-center text-cyan-300 mb-6">
                    Primero, encuentra el juego "Chicken Road"
                  </h3>
                  <div class="flex flex-col md:flex-row gap-6 justify-center items-start">
                    <div class="w-full md:w-1/2">
                      <h4 class="text-center mb-2 text-lg">
                        CÓMO ENCONTRAR "CHICKEN ROAD" EN LA WEB
                      </h4>
                      <div class="aspect-video bg-black border border-cyan-700 rounded-lg overflow-hidden">
                        <iframe class="w-full h-full" id="chicken-find-game-web-iframe" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen=""></iframe>
                      </div>
                    </div>
                    <div class="w-full md:w-1/2">
                      <h4 class="text-center mb-2 text-lg">
                        CÓMO ENCONTRAR "CHICKEN ROAD" EN LA APP
                      </h4>
                      <div class="aspect-video bg-black border border-cyan-700 rounded-lg overflow-hidden">
                        <iframe class="w-full h-full" id="chicken-find-game-app-iframe" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen=""></iframe>
                      </div>
                    </div>
                  </div>
                  <div class="text-center mt-8">
                    <button class="i-found-game-btn bg-green-600 text-black px-8 py-3 text-lg hover:bg-green-500 transition-all duration-300 active:scale-95 rounded-md font-bold">
                      ENCONTRÉ EL JUEGO
                    </button>
                  </div>
                </div>
                <div class="predictor-section hidden w-full relative min-h-[60vh] flex flex-col items-center justify-center bg-black/30 border border-green-800 rounded-md p-4 pt-16 pb-8">
                  <button class="back-to-signals-btn absolute top-4 left-4 text-yellow-400 hover:text-yellow-300 transition-colors bg-transparent border border-yellow-400 rounded px-3 py-1 text-sm hover:bg-yellow-400 hover:text-black">
                    &lt;-- Volver
                  </button>
                  <div class="absolute top-4 right-4 flex flex-col sm:flex-row gap-2">
                    <button class="open-video-btn text-orange-400 hover:text-orange-300 bg-transparent border border-orange-400 rounded px-4 py-2 text-base hover:bg-orange-400 hover:text-black font-bold transition-all active:scale-95" data-videos-key="howToUse" data-game-key="chicken">
                      CÓMO USAR EL PREDICTOR
                    </button>
                  </div>
                  <h3 class="game-title text-3xl sm:text-4xl text-center mb-4 px-12 sm:px-0 mt-8 sm:mt-0"></h3>
                  <div class="w-full flex justify-center mb-4">
                    <div class="relative w-full max-w-xs" data-select-id="chicken-difficulty">
                      <label class="block text-sm text-gray-400 mb-1 text-center">Dificultad</label>
                      <button class="custom-select-trigger w-full bg-gray-900 border border-green-700 rounded p-3 flex justify-between items-center">
                        <span class="selected-option">Fácil</span><i class="fas fa-chevron-down text-xs"></i>
                      </button>
                      <div class="custom-select-options hidden absolute top-full left-0 right-0 mt-1 bg-gray-900 border border-green-700 rounded-md z-10 overflow-hidden">
                        <div class="p-2 cursor-pointer hover:bg-green-800/50">
                          Fácil
                        </div>
                        <div class="p-2 cursor-pointer hover:bg-green-800/50">
                          Medio
                        </div>
                        <div class="p-2 cursor-pointer hover:bg-green-800/50">
                          Difícil
                        </div>
                        <div class="p-2 cursor-pointer hover:bg-green-800/50">
                          Extremo
                        </div>
                      </div>
                    </div>
                  </div>
                  <div id="chicken-road-viewport" class="w-full h-24 relative rounded-md border-y-4 border-gray-500">
                    <div id="chicken-road-track" class="h-full relative flex items-center"></div>
                    <img id="chicken-icon" src="https://iili.io/FvIoXhg.webp" class="absolute h-16 w-16 top-1/2" alt="Chicken">
                  </div>
                  <p id="chicken-bet-suggestion" class="bet-suggestion-text text-center text-yellow-400 h-8 my-6 text-sm sm:text-xl font-bold px-2"></p>
                  <div id="chicken-actions-initial" class="flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4 w-full max-w-md">
                    <button id="chicken-get-bet-btn" class="flex-1 bg-green-600 text-black px-4 py-2 text-base hover:bg-green-500 transition-all duration-300 active:scale-95 rounded-md">
                      Obtener Tamaño de Apuesta
                    </button>
                    <button id="chicken-get-signal-btn" class="flex-1 px-4 py-2 text-base transition-all duration-300 active:scale-95 rounded-md btn-disabled" disabled="">
                      Obtener Señal
                    </button>
                  </div>
                  <button id="chicken-get-another-btn" class="hidden w-full max-w-md bg-yellow-500 text-black px-4 py-2 text-base hover:bg-yellow-400 transition-all duration-300 active:scale-95 rounded-md">
                    OBTENER OTRA SEÑAL
                  </button>
                  <div id="chicken-console" class="game-console w-full max-w-md border rounded-md mt-6 p-2 font-mono text-xs overflow-y-auto">
                    <div></div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div id="accessModal" class="fixed inset-0 bg-black bg-opacity-80 backdrop-blur-sm flex items-center justify-center p-4 hidden">
            <div id="modalContainer" class="bg-[#0d0d0d] border border-green-500 rounded-lg p-6 md:p-8 w-full max-w-sm relative shadow-2xl shadow-green-500/30">
              <button id="closeModalBtn" class="absolute top-2 right-3 text-gray-500 hover:text-green-400 text-3xl transition-colors">
                ×
              </button>
              <div id="formContent" class="text-center">
                <p class="blinking-red text-sm mb-4">
                  // 3 códigos de acceso disponibles para hoy //
                </p>
                <label for="accessCode" class="block text-xl mb-4">Escribe el código de acceso</label><input type="text" id="accessCode" name="accessCode" class="hacker-input w-full bg-gray-900 border border-green-600 text-green-300 rounded p-3 text-center focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all" placeholder="Código de acceso">
                <p id="errorMessage" class="text-red-500 h-5 mt-2 text-sm"></p>
                <button id="validateBtn" class="mt-4 w-full bg-green-600 text-black px-6 py-2 text-lg hover:bg-green-500 transition-all duration-300 active:scale-95">
                  VALIDAR
                </button>
              </div>
              <div id="statusContent" class="text-center hidden h-36 flex items-center justify-center">
                <p id="statusText" class="text-2xl animate-pulse"></p>
              </div>
            </div>
          </div>
          <div id="videoModal" class="fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 hidden z-50">
            <div id="videoModalContainer" class="bg-[#0d0d0d] border border-green-500 rounded-lg w-full max-w-2xl relative shadow-2xl shadow-green-500/30">
              <button id="closeVideoModalBtn" class="absolute -top-3 -right-3 text-black bg-white rounded-full h-8 w-8 flex items-center justify-center hover:bg-gray-200 text-2xl transition-colors z-10">
                ×
              </button>
              <h3 id="videoModalTitle" class="text-white text-xl p-4 text-center"></h3>
              <div class="aspect-video">
                <iframe id="youtube-player" class="w-full h-full" src="" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen=""></iframe>
              </div>
              <div id="video-navigation" class="p-2 flex justify-center items-center gap-4">
                <button id="prevVideoBtn" class="text-white disabled:text-gray-600">
                  <i class="fas fa-arrow-left"></i>
                </button>
                <span id="video-counter" class="text-sm text-gray-400"></span>
                <button id="nextVideoBtn" class="text-white disabled:text-gray-600">
                  <i class="fas fa-arrow-right"></i>
                </button>
              </div>
            </div>
          </div>

          <div id="promoModal" class="fixed inset-0 bg-black bg-opacity-80 backdrop-blur-sm flex items-center justify-center p-4 hidden z-[80]">
            <div class="bg-[#0d0d0d] border border-yellow-500 rounded-lg p-6 w-full max-w-lg relative shadow-2xl shadow-yellow-500/30 text-center">
              <button id="closePromoModalBtn" class="absolute top-2 right-3 text-gray-500 hover:text-yellow-400 text-3xl transition-colors">
                ×
              </button>
              <h2 class="text-2xl text-yellow-300 mb-4 font-bold">
                ¡Una Gran Promoción!
              </h2>
              <p class="text-gray-300 mb-6">
                ¡Tenemos una gran promoción en forma de Rueda de la Fortuna!
                ¡Puedes ganar premios en efectivo a tu tarjeta, acceso privado,
                bonos, etc.! Para recibir códigos especiales, escríbeme la
                palabra "WHEEL999" para obtener instrucciones sobre cómo obtener
                un código especial.
              </p>
              <button id="openLotteryFromPromoBtn" class="shimmer-btn rounded-md px-8 py-3 text-lg">
                <i class="fas fa-star mr-2"></i>Ir a la Rueda de la Fortuna
              </button>
            </div>
          </div>

          <div id="lotteryModal" class="fixed inset-0 bg-black bg-opacity-80 backdrop-blur-sm flex items-center justify-center p-4 hidden z-[60]">
            <div class="bg-[#0d0d0d] border border-yellow-500 rounded-lg p-4 sm:p-6 md:p-8 w-full max-w-md sm:max-w-lg md:max-w-xl relative shadow-2xl shadow-yellow-500/30 text-center overflow-hidden">
              <canvas id="confettiCanvas" class="absolute top-0 left-0 w-full h-full pointer-events-none z-20"></canvas>
              <button id="closeLotteryModalBtn" class="absolute top-2 right-3 text-gray-500 hover:text-yellow-400 text-3xl transition-colors z-10">
                ×
              </button>
              <h2 class="text-3xl text-yellow-300 mb-4 font-bold" style="text-shadow: 0 0 8px #f6e05e">
                Rueda de la Fortuna
              </h2>
              <div id="wheel-container" class="relative w-full max-w-[300px] sm:max-w-[400px] md:max-w-[450px] aspect-square mx-auto my-4 flex items-center justify-center">
                <div id="wheel-pointer" class="absolute"></div>
                <canvas id="wheelCanvas"></canvas>
              </div>
              <div id="lottery-controls" class="flex flex-col items-center">
                <label for="lotteryCode" class="block text-lg mb-2 text-gray-300">Introduce tu código especial</label>
                <input type="text" id="lotteryCode" class="hacker-input w-full max-w-xs mx-auto bg-gray-900 border border-yellow-600 text-yellow-300 rounded p-3 text-center focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:border-transparent transition-all">
                <p id="lotteryErrorMessage" class="text-red-500 h-5 mt-2 text-sm"></p>
                <div class="mt-4 w-full max-w-xs mx-auto flex gap-2">
                  <button id="spinBtn" class="flex-grow bg-yellow-500 text-black px-6 py-3 text-lg hover:bg-yellow-400 transition-all duration-300 active:scale-95 rounded-md font-bold disabled:bg-gray-600 disabled:cursor-not-allowed">
                    GIRAR LA RUEDA
                  </button>
                  <button id="infoBtn" class="bg-blue-600 text-white px-5 py-3 text-lg hover:bg-blue-500 transition-all duration-300 active:scale-95 rounded-md font-bold">
                    <i class="fas fa-info"></i>
                  </button>
                </div>
              </div>
              <div id="lottery-result" class="hidden min-h-[148px] flex flex-col items-center justify-center">
                <p class="text-lg text-gray-400">¡Felicidades! Ganaste:</p>
                <p id="lotteryResultText" class="text-2xl sm:text-3xl text-yellow-300 font-bold mt-2"></p>
                <p class="text-lg mt-2 blinking-text font-bold">
                  ESCRÍBEME LO QUE GANASTE PARA OBTENERLO
                </p>
                <button id="spinAgainBtn" class="mt-4 w-full max-w-xs mx-auto bg-gray-700 text-yellow-300 px-6 py-2 text-base hover:bg-gray-600 transition-all duration-300 active:scale-95 rounded-md font-bold">
                  Girar de Nuevo
                </button>
              </div>
            </div>
          </div>

          <div id="infoModal" class="fixed inset-0 bg-black bg-opacity-80 backdrop-blur-sm flex items-center justify-center p-4 hidden z-[70]">
            <div class="bg-[#0d0d0d] border border-blue-500 rounded-lg p-6 w-full max-w-lg relative shadow-2xl shadow-blue-500/30">
              <button id="closeInfoModalBtn" class="absolute top-2 right-3 text-gray-500 hover:text-blue-400 text-3xl transition-colors">
                ×
              </button>
              <h2 class="text-2xl text-blue-300 mb-6 font-bold text-center">
                Información de Premios
              </h2>

              <h3 class="text-lg text-white font-bold mb-2">
                Tasas de Obtención de Premios:
              </h3>
              <ol class="list-decimal list-inside text-gray-300 space-y-1">
                <li>
                  <span class="font-bold text-yellow-400">SEÑALES PERSONALES DEL ADMIN</span>
                  - 5%
                </li>
                <li>
                  <span class="font-bold text-yellow-400">100$ A TU TARJETA</span>
                  - 5%
                </li>
                <li>Acceso PREDICTOR VIP - 15%</li>
                <li>Acceso PREDICTOR SLOT - 15%</li>
                <li>BONO DEPÓSITO +100% - 20%</li>
                <li>BONO DEPÓSITO +50% - 20%</li>
                <li>NADA - 20%</li>
              </ol>

              <h3 class="text-lg text-white font-bold mt-6 mb-2">
                ¿CÓMO OBTENER UN 'CÓDIGO ESPECIAL'?
              </h3>
              <p class="text-gray-300">
                Para recibir nuevos códigos para la RUEDA DE LA FORTUNA
                necesitas escribir "WHEEL999" en el chat conmigo y obtener
                instrucciones sobre cómo ganar un nuevo código.
              </p>
              <p class="text-gray-400 text-sm mt-1">
                El código solo se puede usar una vez.
              </p>

              <h3 class="text-lg text-white font-bold mt-6 mb-2">
                ¿CÓMO RECLAMAR TU PREMIO?
              </h3>
              <p class="text-gray-300">
                Para reclamar tu premio, debes escribirme y enviar una captura
                de pantalla de lo que ganaste. No intentes hacer trampa, reviso
                todo en el sistema y los registros.
              </p>
            </div>
          </div>

          <div id="chat-overlay" class="fixed inset-0 bg-black/60 z-40 hidden"></div>
          <div class="fixed bottom-5 right-5 z-50">
            <button id="chat-toggle-btn" class="w-16 h-16 bg-green-500 rounded-full flex items-center justify-center text-black shadow-lg shadow-green-500/50 hover:scale-110 transition-transform">
              <i class="fas fa-comments text-3xl"></i>
            </button>
            <div id="chat-widget" class="hidden absolute bottom-20 right-0 w-80 sm:w-96 h-[500px] bg-black/80 backdrop-blur-md border-2 border-green-600 rounded-lg flex flex-col">
              <div class="p-3 flex justify-between items-center border-b border-green-800">
                <h3 class="text-lg">// CHAT EN VIVO //</h3>
                <button id="chat-close-btn" class="text-gray-400 hover:text-green-400">
                  <i class="fas fa-times"></i>
                </button>
              </div>
              <div id="chat-messages" class="flex-1 p-3 overflow-y-auto space-y-3"></div>
              <div class="p-3 border-t border-green-800">
                <div class="flex space-x-2">
                  <input type="text" id="chat-input" class="flex-1 bg-gray-900 border border-green-700 rounded px-2 text-sm focus:outline-none focus:ring-1 focus:ring-green-500" placeholder="Tu mensaje..."><button id="chat-send-btn" class="bg-green-600 text-black px-4 py-1 rounded hover:bg-green-500 active:scale-95 disabled:bg-gray-600 disabled:cursor-not-allowed">
                    ENVIAR
                  </button>
                </div>
              </div>
            </div>
          </div>
          <script>
            document.addEventListener("DOMContentLoaded", () => {
              const SCRIPT_BODY = () => {
                
            const FEATURE_FLAGS = {
  "enableLottery": true,
  "enableBetStep": true
};
            const prizes = [
  {
    "text": "VIP\\nACCESS",
    "color": "#8B5CF6",
    "textColor": "#FFFFFF",
    "animatedBorder": true,
    "specialCode": "VIP1"
  },
  {
    "text": "+50%\\nBONUS",
    "color": "#3B82F6",
    "textColor": "#FFFFFF",
    "animatedBorder": true,
    "specialCode": "ECU444"
  },
  {
    "text": "100$\\nTO CARD",
    "color": "#FBBF24",
    "textColor": "#1F2937",
    "animatedBorder": true,
    "specialCode": "CASH"
  },
  {
    "text": "NOTHING",
    "color": "#4B5563",
    "textColor": "#E5E7EB",
    "animatedBorder": false,
    "specialCode": ""
  },
  {
    "text": "SLOT\\nACCESS",
    "color": "#EC4899",
    "textColor": "#FFFFFF",
    "animatedBorder": true,
    "specialCode": "SLOT"
  }
];
            const lotteryCodes = {
  "VIP1": 0,
  "ECU444": 1,
  "CASH": 2,
  "SLOT": 4
};
            const CUSTOM_CONFIG = {
  "currency": "USD",
  "minBet": "5",
  "maxBet": "100",
  "winnerMultiplier": "100",
  "vipLink": "#"
};
            const CARDS_CONFIG = [
  {
    "id": "vip",
    "title": "VIP AI PREDICTOR",
    "image": "https://iili.io/KOce6qG.png",
    "showFindGame": true
  },
  {
    "id": "aviator",
    "title": "Aviator AI PREDICTOR",
    "image": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQqBdX8SuaC1Ws7ZYuCVQstQ4qRi9A_3SWujg&s",
    "showFindGame": true
  },
  {
    "id": "mines",
    "title": "Mines AI PREDICTOR",
    "image": "https://rotativka.com/en/wp-content/uploads/sites/3/2021/06/Mines-Demo.jpg",
    "showFindGame": true
  },
  {
    "id": "penalty",
    "title": "Penalty AI PREDICTOR",
    "image": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcThYP5CGxc52hWd4ToMHI8MIJhun5BEjHh5LQ&s",
    "showFindGame": true
  },
  {
    "id": "apple",
    "title": "Apple of Fortune AI PREDICTOR",
    "image": "https://play-lh.googleusercontent.com/ezAY-TvV3PlhYWLs8k8czRjWWSdBwFtPrw72fNpS8p6wByC0xBG-Dgt0K5ojieZXrg",
    "showFindGame": true
  },
  {
    "id": "chicken",
    "title": "Chicken Road AI PREDICTOR",
    "image": "https://cdn6.aptoide.com/imgs/1/0/2/1023a04c18a7a91673200703af12a58f_icon.png",
    "showFindGame": true
  },
  {
    "id": "slot-0",
    "title": "MEGA SLOT GAME",
    "image": "https://i.ibb.co/37R6F37/slot1.png",
    "showFindGame": true
  },
  {
    "id": "slot-1",
    "title": "ANOTHER SLOT",
    "image": "https://i.ibb.co/Vvz1D1M/slot2.png",
    "showFindGame": false
  }
];
            const VIDEO_CONFIG = {
  "aviator": {
    "findGame": [
      {
        "url": "https://www.youtube.com/embed/VionWpts3F8"
      },
      {
        "url": "https://youtube.com/embed/qSmuuD4Kmto"
      }
    ],
    "howToUse": [
      {
        "url": "https://www.youtube.com/embed/R9oKm-Yy2h8"
      }
    ]
  },
  "mines": {
    "findGame": [
      {
        "url": "https://youtube.com/embed/lIZc1X4eAlg"
      },
      {
        "url": "https://youtube.com/embed/kxK2AmXTbtk"
      }
    ],
    "howToUse": [
      {
        "url": "https://www.youtube.com/embed/YnbZbhfRpIo"
      }
    ]
  },
  "penalty": {
    "findGame": [
      {
        "url": "https://youtube.com/embed/ztTUO40WokI"
      },
      {
        "url": "https://youtube.com/embed/plJJXi3XWes"
      }
    ],
    "howToUse": [
      {
        "url": "https://www.youtube.com/embed/JSOkZujumoM"
      }
    ]
  },
  "apple": {
    "findGame": [
      {
        "url": "https://youtube.com/embed/-RTJcxOE82U"
      },
      {
        "url": "https://youtube.com/embed/zE4dHLHK9Mo"
      }
    ],
    "howToUse": [
      {
        "url": "https://www.youtube.com/embed/5qRmvocIM8Q"
      }
    ]
  },
  "chicken": {
    "findGame": [
      {
        "url": "https://youtube.com/embed/zMTKdBYz64M"
      },
      {
        "url": "https://youtube.com/embed/FpyFq-QMczo"
      }
    ],
    "howToUse": [
      {
        "url": "https://www.youtube.com/embed/7pu_wBdoxwg"
      }
    ]
  },
  "slot": {
    "findGame": [
      {
        "url": "https://www.youtube.com/embed/dQw4w9WgXcQ"
      },
      {
        "url": "https://www.youtube.com/embed/dQw4w9WgXcQ"
      }
    ],
    "howToUse": [
      {
        "url": "https://www.youtube.com/embed/dQw4w9WgXcQ"
      }
    ]
  }
};
           // Assuming populated elsewhere

                // Translated Strings Object for JavaScript
                const T = {
                  pageTitle: "PREDICTOR IA",
                  mainTitle: "PREDICTOR IA",
                  mainButton: "OBTENER SEÑALES IA",
                  topWinners: "// MIS ESTUDIANTES //",
                  availableSignals: "// SEÑALES IA //",
                  logoutButton: "Cerrar sesión",
                  activateButton: "ACTIVAR",
                  backButton: "<-- Volver",
                  getBetButton: "Obtener Tamaño de Apuesta",
                  getSignalButton: "Obtener Señal",
                  getAnotherButton: "OBTENER OTRA SEÑAL",
                  startNewGame: "Empezar Nuevo Juego",
                  howToUse: "CÓMO USAR EL PREDICTOR",
                  howToFindGame: "CÓMO ENCONTRAR JUEGO",
                  modalCodesAvailable:
                    "// 3 códigos de acceso disponibles para hoy",
                  modalTypeCode: "Escribe el código de acceso",
                  modalPlaceholder: "Código de acceso",
                  modalValidateButton: "VALIDAR",
                  analyzingData: "Analizando datos...",
                  accessDenied: "ACCESO DENEGADO. CÓDIGO INVÁLIDO.",
                  decryptingSignals: "Descifrando señales...",
                  accessGranted: "ACCESO CONCEDIDO",
                  betSuggestion:
                    "Apuesta una cantidad entre {minBet} {currency} y {maxBet} {currency}",
                  signalRevealed: "Señal IA: Reveladas 5 celdas seguras",
                  signalTargetZone: "Señal IA: Zona objetivo {zone}",
                  signalTargetZoneWithCount:
                    "Señal IA: Zona objetivo {zone} ({count} señales restantes)",
                  signalSelectRow:
                    "Señal IA: Selecciona el número de fila {finalSignal}",
                  signalSelectRowWithCount:
                    "Señal IA: Selecciona el número de fila {finalSignal} ({count} señales restantes)",
                  signalClickGo:
                    'SEÑAL IA: HAZ CLIC EN "IR" {signalSteps} VECES',
                  chatTitle: "// CHAT EN VIVO //",
                  chatPlaceholder: "Tu mensaje...",
                  chatSendButton: "ENVIAR",
                  chatLimitReached: "Límite de mensajes alcanzado",
                  signalsPerSec: "Señales/seg:",
                  successRate: "Tasa de éxito:",
                  needAnotherCode: "NECESITAS OTRO CÓDIGO DE ACCESO",
                  gridSize: "Tamaño de Cuadrícula",
                  mineCount: "Cantidad de Minas",
                  difficulty: "Dificultad",
                  loadingData: "// Cargando datos...",
                  videoOf: "Video {current} de {total}",
                  betConsoleMessages: [
                    "Conectando al flujo de datos...",
                    "Analizando volatilidad del mercado...",
                    "Calculando ratio riesgo/recompensa...",
                    "Ejecutando modelo predictivo v3.4...",
                    "Finalizando tamaño de apuesta...",
                    "ÉXITO: Parámetros de apuesta calculados.",
                  ],
                  aviatorSignalConsoleMessages: [
                    "Iniciando análisis de trayectoria de vuelo...",
                    "Procesando vectores de salida en tiempo real...",
                    "Calibrando para varianza atmosférica...",
                    "Cruzando referencias con datos históricos...",
                    "FIJANDO SEÑAL...",
                    "ÉXITO: Señal de multiplicador adquirida.",
                  ],
                  minesSignalConsoleMessages: [
                    "Iniciando escáner de cuadrícula...",
                    "Mapeando matriz de probabilidad...",
                    "Ejecutando chequeo de entrelazamiento cuántico...",
                    "Identificando grupos de celdas de bajo riesgo...",
                    "AISLANDO CAMINO SEGURO...",
                    "ÉXITO: 5 celdas seguras identificadas.",
                  ],
                  penaltySignalConsoleMessages: [
                    "Accediendo a patrones neuronales del portero...",
                    "Calculando probabilidades de trayectoria de tiro...",
                    "Analizando condiciones de viento y campo...",
                    "Identificando punto defensivo más débil...",
                    "OBJETIVO ADQUIRIDO...",
                    "ÉXITO: Zona de tiro óptima predicha.",
                  ],
                  appleSignalConsoleMessages: [
                    "Iniciando algoritmo de la fortuna...",
                    "Escaneando árbol de probabilidad...",
                    "Sincronizando con aleatorizador cuántico...",
                    "Analizando patrones de suerte antiguos...",
                    "COSECHANDO RESULTADO...",
                    "ÉXITO: Resultado afortunado determinado.",
                  ],
                  chickenSignalConsoleMessages: [
                    "Analizando patrones de comportamiento del pollo...",
                    "Calculando camino óptimo...",
                    "Evitando obstáculos de la granja...",
                    "Prediciendo movimientos del zorro...",
                    "CRUZANDO LA CARRETERA...",
                    "ÉXITO: Camino seguro determinado.",
                  ],
                  slotSignalConsoleMessages: [
                    "Iniciando algoritmo de slot v2.1...",
                    "Analizando probabilidades de los rodillos...",
                    "Calculando frecuencia de activación de bonos...",
                    "Cruzando referencias con datos RTP...",
                    "FIJANDO CONTEO DE GIROS...",
                    "ÉXITO: Conteo de giros óptimo para bono adquirido.",
                  ],
                  fakeMessages: [
                    // Translated examples
                    "¿quién probó penalty? ¿alguna suerte?",
                    "¡¡aviator está que arde hoy ya pillé 5x!!",
                    "¿¿algún código promocional chicos??",
                    "¿esto es siquiera legítimo? lol parece sospechoso",
                    "admin añade señales de lucky jet por favor",
                    "Mines es increíble, solo no seas avaricioso",
                    "¿alguien vende una cuenta? la compro",
                    "no entiendo chicken road, ¿alguna guía?",
                    "este es el mejor predictor que he visto",
                    "un saludo a los que dudaban, doblé mi bankroll esta noche",
                    "por qué no funciona mi código de acceso",
                    "apple of fortune es OP",
                    "acabo de retirar 100$ gracias IA",
                    "esto se siente como hacer trampa jaja",
                    "cuál es la tasa de éxito para ustedes hoy",
                    "penalty falló una para mí pero sigo en ganancias",
                    "recuerden gestionar sus riesgos gente",
                    "maldición, estaba a un paso en mines...",
                    "el chat va muy rápido",
                    "¿hay un grupo vip?",
                    "lol un tipo está llorando en la esquina",
                    "simplemente sigue la señal y no pienses demasiado",
                    "funciona. simple.",
                    "mi amigo me habló de este sitio ayer",
                    "¿cuántas señales por día?",
                    "soy nuevo aquí, de qué va esto",
                    "finalmente una herramienta que realmente funciona",
                    "necesito más códigos de acceso",
                    "acabo de alcanzar 10x en aviator ¡¡vamooos!!",
                    "¿es seguro usar esta cosa?",
                    "el servidor parece un poco lento hoy",
                    "lol perdí todo, ten cuidado",
                    "retiré 50 pavos, no está mal para empezar",
                    "la interfaz es genial, siento que estoy en una película",
                    "maldita sea, debería haber parado antes",
                    "¿alguien de europa por aquí?",
                    "el sistema de código de acceso es inteligente",
                    "¿quién es el admin aquí? tengo una pregunta",
                    "esto es mucho mejor que esos canales de tg fraudulentos",
                    "chicken road está infravalorado lol es divertido",
                    "esperando la siguiente señal...",
                    "voy a apostar todo, deséenme suerte",
                    "¿puedo usar esto en mi teléfono?",
                    "mi corazón se acelera cada vez que juego a mines",
                    "la IA debe ser una locura para predecir esto",
                  ],
                  qaPairs: [
                    // Translated examples
                    {
                      q: "¿es esto gratis?",
                      a: "sí, las señales son gratis por ahora",
                    },
                    {
                      q: "¿cómo obtener un nuevo código de acceso?",
                      a: "creo que se actualizan diariamente",
                    },
                    {
                      q: "¿alguien probó apple of fortune? ¿es rentable?",
                      a: "lo es pero el riesgo es alto",
                    },
                    {
                      q: "mi amigo no puede entrar ¿está caído el sitio?",
                      a: "a mí me funciona, tal vez prueba con una vpn",
                    },
                    {
                      q: "¿qué pasa si pierdo?",
                      a: "es parte del juego tío, no apuestes más de lo que puedas perder",
                    },
                    {
                      q: "¿me pueden banear por usar esto?",
                      a: "nah, es solo un predictor, no un hack",
                    },
                    {
                      q: "¿algún consejo para mines?",
                      a: "sí, empieza con apuestas pequeñas y no seas avaricioso",
                    },
                    {
                      q: "¿cuál es la mejor estrategia para penalty?",
                      a: "espera señales de alta probabilidad, no te apresures",
                    },
                    {
                      q: "¿qué tan preciso es esto realmente?",
                      a: "bastante bueno para mí, como 8/10 victorias",
                    },
                    {
                      q: "¿hay una app para esto?",
                      a: "todavía no, pero el sitio funciona bien en el móvil",
                    },
                    {
                      q: "¿por qué está bloqueado mi mensaje?",
                      a: "creo que los nuevos usuarios tienen un límite para evitar spam",
                    },
                  ],
                  userReplies: [
                    // Translated examples
                    'hola <span class="font-bold text-red-500">@{username}</span> solo intenta y practica, ya le pillarás el truco',
                    '<span class="font-bold text-red-500">@{username}</span> no hay una única estrategia, la IA siempre se está adaptando, solo observa y aprende',
                  ],
                };

                // --- Get DOM Elements (Keep as is) ---
                const mainContent = document.getElementById("main-content"),
                  appContainer = document.getElementById("app-container"),
                  signalsSection = document.getElementById("signals-section"),
                  gameView = document.getElementById("game-view"),
                  openModalBtn = document.getElementById("openModalBtn"),
                  accessModal = document.getElementById("accessModal"),
                  modalContainer = document.getElementById("modalContainer"),
                  closeModalBtn = document.getElementById("closeModalBtn"),
                  accessCodeInput = document.getElementById("accessCode"),
                  validateBtn = document.getElementById("validateBtn"),
                  formContent = document.getElementById("formContent"),
                  statusContent = document.getElementById("statusContent"),
                  statusText = document.getElementById("statusText"),
                  errorMessage = document.getElementById("errorMessage"),
                  chatToggleBtn = document.getElementById("chat-toggle-btn"),
                  chatCloseBtn = document.getElementById("chat-close-btn"),
                  chatWidget = document.getElementById("chat-widget"),
                  chatOverlay = document.getElementById("chat-overlay"),
                  chatMessages = document.getElementById("chat-messages"),
                  chatInput = document.getElementById("chat-input"),
                  chatSendBtn = document.getElementById("chat-send-btn"),
                  logoutBtn = document.getElementById("logoutBtn");
                let chatInterval;
                const aviatorMultiplier =
                    document.getElementById("aviator-multiplier"),
                  aviatorBetSuggestion = document.getElementById(
                    "aviator-bet-suggestion"
                  ),
                  aviatorGetBetBtn = document.getElementById(
                    "aviator-get-bet-btn"
                  ),
                  aviatorGetSignalBtn = document.getElementById(
                    "aviator-get-signal-btn"
                  ),
                  aviatorActionsInitial = document.getElementById(
                    "aviator-actions-initial"
                  ),
                  aviatorGetAnotherBtn = document.getElementById(
                    "aviator-get-another-btn"
                  ),
                  aviatorConsoleOutput =
                    document.getElementById("aviator-console");
                let aviatorSignalCount =
                    parseInt(localStorage.getItem("aviatorSignalCount")) || 0,
                  multiplierAnimation;
                const minesGridContainer = document.getElementById(
                    "mines-grid-container"
                  ),
                  minesBetSuggestion = document.getElementById(
                    "mines-bet-suggestion"
                  ),
                  minesGetBetBtn = document.getElementById("mines-get-bet-btn"),
                  minesGetSignalBtn = document.getElementById(
                    "mines-get-signal-btn"
                  ),
                  minesActionsInitial = document.getElementById(
                    "mines-actions-initial"
                  ),
                  minesGetAnotherBtn = document.getElementById(
                    "mines-get-another-btn"
                  ),
                  minesConsoleOutput = document.getElementById("mines-console");
                let minesState = { gridSize: 5, mineCount: 3 };
                const penaltyTargetZones =
                    document
                      .getElementById("game-screen-penalty")
                      ?.querySelectorAll(".penalty-target-zone") || [], // Added safety check
                  penaltyBetSuggestion = document.getElementById(
                    "penalty-bet-suggestion"
                  ),
                  penaltyGetBetBtn = document.getElementById(
                    "penalty-get-bet-btn"
                  ),
                  penaltyGetSignalBtn = document.getElementById(
                    "penalty-get-signal-btn"
                  ),
                  penaltyActionsInitial = document.getElementById(
                    "penalty-actions-initial"
                  ),
                  penaltyStartNewGameBtn = document.getElementById(
                    "penalty-start-new-game-btn"
                  ),
                  penaltyConsoleOutput =
                    document.getElementById("penalty-console");
                let penaltySignalCountInRound = 0;
                const appleSignalDisplay = document.getElementById(
                    "apple-signal-display"
                  ),
                  appleBetSuggestion = document.getElementById(
                    "apple-bet-suggestion"
                  ),
                  appleGetBetBtn = document.getElementById("apple-get-bet-btn"),
                  appleGetSignalBtn = document.getElementById(
                    "apple-get-signal-btn"
                  ),
                  appleActionsInitial = document.getElementById(
                    "apple-actions-initial"
                  ),
                  appleStartNewGameBtn = document.getElementById(
                    "apple-start-new-game-btn"
                  ),
                  appleConsoleOutput = document.getElementById("apple-console");
                let appleSignalCountInRound = 0;
                const chickenIcon = document.getElementById("chicken-icon"),
                  chickenRoadTrack =
                    document.getElementById("chicken-road-track"),
                  chickenBetSuggestion = document.getElementById(
                    "chicken-bet-suggestion"
                  ),
                  chickenGetBetBtn = document.getElementById(
                    "chicken-get-bet-btn"
                  ),
                  chickenGetSignalBtn = document.getElementById(
                    "chicken-get-signal-btn"
                  ),
                  chickenActionsInitial = document.getElementById(
                    "chicken-actions-initial"
                  ),
                  chickenGetAnotherBtn = document.getElementById(
                    "chicken-get-another-btn"
                  ),
                  chickenConsoleOutput =
                    document.getElementById("chicken-console");
                let chickenState = { difficulty: "Easy", currentStep: 0 };
                const STOVE_WIDTH = 128;

                // --- Rest of JS Logic (Keep as is, uses T object for text) ---

                function generateAndInsertSlotCards() {
                  const slotConfigs = CARDS_CONFIG.filter((c) =>
                    c.id.startsWith("slot-")
                  );
                  if (slotConfigs.length === 0) return;

                  let slotsHtml = "";
                  slotConfigs.forEach((slot, index) => {
                    slotsHtml += `
                           <div class="signal-card locked-card bg-[#0d0d0d] border border-fuchsia-500 rounded-lg overflow-hidden flex flex-col" data-card-type="slot" data-game="${slot.id}">
                             <div class="w-full h-48 overflow-hidden relative">
                               <img src="${slot.image}" alt="${slot.title}" class="card-image w-full h-full object-cover transition-all duration-300"/>
                               <div class="banner-container absolute inset-0 flex items-center justify-center">
                                 <div class="absolute w-[150%] bg-fuchsia-600 text-white text-center font-bold py-2 -rotate-12 text-sm shadow-lg"> ${T.needAnotherCode}
                                 </div>
                               </div>
                             </div>
                             <div class="p-4 flex flex-col flex-grow text-center">
                               <h3 class="card-title text-lg font-bold mb-2 flex-grow text-fuchsia-300" style="text-shadow: 0 0 8px #d946ef">
                                 ${slot.title}
                               </h3>
                               <p id="stats-slot-${index}" class="text-sm text-gray-400 mb-3 font-mono leading-tight">
                                 ${T.loadingData}
                               </p>
                               <button class="w-full mt-auto bg-gray-600 text-gray-400 px-4 py-2 cursor-not-allowed" disabled>
                                 ${T.activateButton}
                               </button>
                             </div>
                           </div>
                         `;
                  });

                  const vipCard = document.querySelector(
                    '[data-card-type="vip"]'
                  );
                  if (vipCard) {
                    vipCard.insertAdjacentHTML("afterend", slotsHtml);
                  }
                }

                function applyCardConfigs() {
                  const staticConfigs = CARDS_CONFIG.filter(
                    (c) => !c.id.startsWith("slot-")
                  );

                  staticConfigs.forEach((config) => {
                    const card = document.querySelector(
                      `.signal-card[data-game="${config.id}"]`
                    );
                    if (card) {
                      const titleEl = card.querySelector(".card-title");
                      const imageEl = card.querySelector(".card-image");
                      if (titleEl) titleEl.textContent = config.title;
                      if (imageEl) {
                        imageEl.src = config.image;
                        imageEl.alt = config.title;
                      }
                    }
                  });

                  const vipLink = document.getElementById(
                    "vip-send-message-link"
                  );
                  // Check if CUSTOM_CONFIG.vipLink exists before setting
                  if (vipLink && CUSTOM_CONFIG && CUSTOM_CONFIG.vipLink) {
                    vipLink.href = CUSTOM_CONFIG.vipLink;
                  } else if (vipLink) {
                    // Provide a default or hide the button if link is missing
                    console.warn("VIP link not found in CUSTOM_CONFIG");
                    // vipLink.style.display = 'none'; // Option to hide
                  }
                }

                function applyVideoConfigs() {
                  for (const gameKey in VIDEO_CONFIG) {
                    if (VIDEO_CONFIG.hasOwnProperty(gameKey)) {
                      // Ensure it's not from prototype
                      const gameVideos = VIDEO_CONFIG[gameKey];
                      if (
                        gameVideos &&
                        gameVideos.findGame &&
                        gameVideos.findGame.length > 0
                      ) {
                        const webIframe = document.getElementById(
                          `${gameKey}-find-game-web-iframe`
                        );
                        // Check if URL exists before setting
                        if (
                          webIframe &&
                          gameVideos.findGame[0] &&
                          gameVideos.findGame[0].url
                        ) {
                          webIframe.src = gameVideos.findGame[0].url;
                        }

                        const appIframe = document.getElementById(
                          `${gameKey}-find-game-app-iframe`
                        );
                        // Check index 1 and URL exist
                        if (
                          appIframe &&
                          gameVideos.findGame[1] &&
                          gameVideos.findGame[1].url
                        ) {
                          appIframe.src = gameVideos.findGame[1].url;
                        }
                      }
                    }
                  }
                }

                generateAndInsertSlotCards();
                applyCardConfigs();
                applyVideoConfigs();

                if (!FEATURE_FLAGS.enableLottery) {
                  const lotteryBtn = document.getElementById("lotteryBtn");
                  if (lotteryBtn) lotteryBtn.style.display = "none";
                }

                function applyUnlocks() {
                  const vipUnlocked =
                    localStorage.getItem("vipUnlocked") === "true";
                  const slotUnlocked =
                    localStorage.getItem("slotUnlocked") === "true";

                  const vipCard = document.querySelector(
                    '[data-card-type="vip"]'
                  );
                  if (vipCard && vipUnlocked) {
                    vipCard.classList.remove("locked-card");
                    const bannerContainer =
                      vipCard.querySelector(".banner-container");
                    if (bannerContainer) bannerContainer.remove();
                    const button = vipCard.querySelector("button");
                    if (button) {
                      button.disabled = false;
                      button.classList.remove(
                        "bg-gray-600",
                        "text-gray-400",
                        "cursor-not-allowed"
                      );
                      button.classList.add(
                        "bg-yellow-500",
                        "text-black",
                        "hover:bg-yellow-400",
                        "active:scale-95",
                        "activate-btn"
                      );
                      button.textContent = "ENTRAR VIP"; // Set specific text for VIP
                    }
                  }

                  const slotCards = document.querySelectorAll(
                    '[data-card-type="slot"]'
                  );
                  slotCards.forEach((slotCard) => {
                    if (slotCard && slotUnlocked) {
                      slotCard.classList.remove("locked-card");
                      const bannerContainer =
                        slotCard.querySelector(".banner-container");
                      if (bannerContainer) bannerContainer.remove();
                      const button = slotCard.querySelector("button");
                      if (button) {
                        button.disabled = false;
                        button.classList.remove(
                          "bg-gray-600",
                          "text-gray-400",
                          "cursor-not-allowed"
                        );
                        button.classList.add(
                          "bg-fuchsia-500", // Slot specific color
                          "text-black",
                          "hover:bg-fuchsia-400",
                          "active:scale-95",
                          "activate-btn"
                        );
                        button.textContent = T.activateButton; // Use generic activate text
                      }
                    }
                  });
                }

                function checkAccessSession() {
                  const timestamp = localStorage.getItem(
                    "accessGrantedTimestamp"
                  );
                  if (timestamp) {
                    const now = new Date().getTime();
                    const sessionDuration = 14400000; // 4 hours in milliseconds
                    if (now - parseInt(timestamp) < sessionDuration) {
                      mainContent.classList.add("hidden");
                      appContainer.classList.remove("hidden");
                      applyUnlocks();
                      if (!sessionStorage.getItem("promoShownThisSession")) {
                        setTimeout(() => {
                          // Delay slightly
                          showPromoModal();
                          sessionStorage.setItem(
                            "promoShownThisSession",
                            "true"
                          );
                        }, 1000);
                      }
                      startPromoInterval();
                    } else {
                      // Session expired
                      localStorage.removeItem("accessGrantedTimestamp");
                      localStorage.removeItem("vipUnlocked");
                      localStorage.removeItem("slotUnlocked");
                      sessionStorage.removeItem("promoShownThisSession");
                      // Show login screen, don't reload automatically
                      mainContent.classList.remove("hidden");
                      appContainer.classList.add("hidden");
                      clearInterval(promoInterval); // Stop promo interval on expiry
                      clearInterval(chatInterval); // Stop chat simulation
                    }
                  } else {
                    // No active session
                    mainContent.classList.remove("hidden");
                    appContainer.classList.add("hidden");
                  }
                }
                const handleValidation = () => {
                  const code = accessCodeInput.value.trim();
                  let accessGranted = false;
                  // Reset unlocks before checking new code
                  localStorage.removeItem("vipUnlocked");
                  localStorage.removeItem("slotUnlocked");

                  // Example Validation Logic (Replace with actual backend check or secure logic)
                  if (code === "1337") {
                    // Example slot code
                    localStorage.setItem("slotUnlocked", "true");
                    accessGranted = true;
                  } else if (code === "8564") {
                    // Example VIP code
                    localStorage.setItem("vipUnlocked", "true");
                    accessGranted = true;
                  } else if (code === "2282") {
                    // Example General access code
                    accessGranted = true;
                  } // Add more codes or validation logic here

                  if (accessGranted) {
                    localStorage.setItem(
                      "accessGrantedTimestamp",
                      new Date().getTime().toString()
                    );
                    formContent.classList.add("hidden");
                    statusContent.classList.remove("hidden");
                    statusText.textContent = T.decryptingSignals;
                    setTimeout(() => {
                      statusText.textContent = T.accessGranted;
                      statusText.classList.remove("animate-pulse");
                      setTimeout(() => {
                        closeModal();
                        mainContent.classList.add("hidden");
                        appContainer.classList.remove("hidden");
                        applyUnlocks(); // Apply unlocks immediately after grant
                        if (!sessionStorage.getItem("promoShownThisSession")) {
                          showPromoModal();
                          sessionStorage.setItem(
                            "promoShownThisSession",
                            "true"
                          );
                        }
                        startPromoInterval(); // Start promo checks after login
                      }, 1000); // 1 sec delay after "Access Granted"
                    }, 2500); // 2.5 sec for "Decrypting" animation
                  } else {
                    errorMessage.textContent = T.accessDenied;
                    accessCodeInput.value = ""; // Clear input on failure
                    modalContainer.classList.add("shake");
                    setTimeout(
                      () => modalContainer.classList.remove("shake"),
                      500
                    );
                  }
                };
                const openModal = () => {
                  accessModal.classList.remove("hidden");
                  // Ensure input is focused for immediate typing
                  setTimeout(() => accessCodeInput.focus(), 50);
                };
                const closeModal = () => {
                  accessModal.classList.add("hidden");
                  // Reset modal state for next opening
                  setTimeout(() => {
                    formContent.classList.remove("hidden");
                    statusContent.classList.add("hidden");
                    statusText.classList.add("animate-pulse"); // Reset animation
                    statusText.textContent = ""; // Clear status text
                    errorMessage.textContent = "";
                    accessCodeInput.value = "";
                  }, 300); // Delay should match modal close animation if any
                };
                function showGameView(gameId) {
                  signalsSection.classList.add("hidden");
                  gameView.classList.remove("hidden");
                  // Hide all game screens initially
                  document
                    .querySelectorAll(".game-screen")
                    .forEach((screen) => screen.classList.add("hidden"));

                  const cardConfig = CARDS_CONFIG.find((c) => c.id === gameId);
                  if (!cardConfig) {
                    console.error("Card config not found for game:", gameId);
                    showSignalsView(); // Go back if config is missing
                    return;
                  }

                  // Determine the correct screen ID (handle generic slot screen)
                  const gameScreenId = gameId.startsWith("slot-")
                    ? "game-screen-slot"
                    : `game-screen-${gameId}`;
                  const gameScreen = document.getElementById(gameScreenId);

                  if (gameScreen) {
                    // Set the game title
                    const gameTitleEl = gameScreen.querySelector(".game-title");
                    if (gameTitleEl) {
                      gameTitleEl.textContent = cardConfig.title;
                    }

                    // Show the correct game screen
                    gameScreen.classList.remove("hidden");
                    gameScreen.classList.add("flex"); // Ensure it's displayed as flex

                    // Handle visibility of tutorial vs predictor sections
                    const videoSection = gameScreen.querySelector(
                      ".video-tutorial-section"
                    );
                    const predictorSection =
                      gameScreen.querySelector(".predictor-section");
                    // Default to showing tutorial if showFindGame isn't explicitly false
                    const showTutorial = cardConfig.showFindGame !== false;

                    if (videoSection && predictorSection) {
                      if (showTutorial) {
                        videoSection.classList.remove("hidden");
                        predictorSection.classList.add("hidden");
                      } else {
                        videoSection.classList.add("hidden");
                        predictorSection.classList.remove("hidden");
                        predictorSection.classList.add("flex");
                      }
                    } else if (predictorSection) {
                      // If no video section, always show predictor
                      predictorSection.classList.remove("hidden");
                      predictorSection.classList.add("flex");
                    }

                    // Reset the specific game's state
                    if (gameId === "aviator") resetAviatorGame();
                    else if (gameId === "mines") resetMinesGame();
                    else if (gameId === "penalty") resetPenaltyGame();
                    else if (gameId === "apple") resetAppleGame();
                    else if (gameId === "chicken") resetChickenGame();
                    else if (gameId.startsWith("slot-")) resetSlotGame(); // Generic reset for slots
                  } else {
                    console.error(
                      "Game screen element not found:",
                      gameScreenId
                    );
                    showSignalsView(); // Go back if screen element is missing
                  }
                }
                function showSignalsView() {
                  gameView.classList.add("hidden");
                  signalsSection.classList.remove("hidden");
                  // Stop any game-specific animations or intervals if necessary
                  clearInterval(multiplierAnimation);
                  cancelAnimationFrame(animationFrameId); // Stop lottery idle loop if active
                  cancelAnimationFrame(spinAnimationId); // Stop lottery spin if active
                  cancelAnimationFrame(confettiAnimationId); // Stop confetti
                }
                function runConsoleSimulation(consoleEl, messages, callback) {
                  if (!consoleEl) return;
                  const outputDiv = consoleEl.querySelector("div");
                  if (!outputDiv) return;

                  outputDiv.innerHTML = ""; // Clear previous output
                  let messageIndex = 0;
                  const intervalId = setInterval(() => {
                    if (messageIndex < messages.length) {
                      const p = document.createElement("p");
                      p.textContent = `> ${messages[messageIndex]}`;
                      // Add success class for specific keywords (adjust as needed)
                      if (
                        messages[messageIndex].startsWith("ÉXITO:") ||
                        messages[messageIndex].startsWith("SUCCESS:")
                      ) {
                        p.classList.add("success");
                      } else if (messages[messageIndex].startsWith("ERROR:")) {
                        p.classList.add("error");
                      }
                      outputDiv.appendChild(p);
                      outputDiv.scrollTop = outputDiv.scrollHeight; // Auto-scroll
                      messageIndex++;
                    } else {
                      clearInterval(intervalId); // Stop interval when done
                      if (callback) callback(); // Execute callback
                    }
                  }, 300); // Delay between messages
                }

                // --- Game Reset Functions (Keep logic, use T object) ---
                function resetAviatorGame() {
                  clearInterval(multiplierAnimation);
                  if (aviatorMultiplier)
                    aviatorMultiplier.textContent = "x1.00";
                  if (aviatorMultiplier)
                    aviatorMultiplier.classList.remove(
                      "multiplier-rising",
                      "multiplier-final"
                    );
                  if (aviatorBetSuggestion)
                    aviatorBetSuggestion.textContent = "";
                  const consoleDiv = aviatorConsoleOutput?.querySelector("div");
                  if (consoleDiv) consoleDiv.innerHTML = "";

                  if (aviatorActionsInitial) {
                    aviatorActionsInitial.classList.remove("hidden");
                    aviatorActionsInitial.classList.add("flex");
                  }
                  if (aviatorGetAnotherBtn)
                    aviatorGetAnotherBtn.classList.add("hidden");

                  if (FEATURE_FLAGS.enableBetStep) {
                    if (aviatorGetBetBtn) aviatorGetBetBtn.style.display = "";
                    if (aviatorGetBetBtn) aviatorGetBetBtn.disabled = false;
                    if (aviatorGetBetBtn)
                      aviatorGetBetBtn.classList.remove("btn-disabled");

                    if (aviatorGetSignalBtn)
                      aviatorGetSignalBtn.disabled = true;
                    if (aviatorGetSignalBtn)
                      aviatorGetSignalBtn.classList.add("btn-disabled");
                    if (aviatorGetSignalBtn)
                      aviatorGetSignalBtn.classList.remove(
                        "bg-green-600",
                        "text-black",
                        "hover:bg-green-500"
                      );
                  } else {
                    if (aviatorGetBetBtn)
                      aviatorGetBetBtn.style.display = "none";
                    if (aviatorGetSignalBtn)
                      aviatorGetSignalBtn.disabled = false;
                    if (aviatorGetSignalBtn)
                      aviatorGetSignalBtn.classList.remove("btn-disabled");
                    if (aviatorGetSignalBtn)
                      aviatorGetSignalBtn.classList.add(
                        "bg-green-600",
                        "text-black",
                        "hover:bg-green-500",
                        "w-full"
                      );
                  }
                }
                // --- Mines Reset ---
                function resetMinesGame() {
                  const gridSizeSelectDisplay = document.querySelector(
                    '[data-select-id="grid-size"] .selected-option'
                  );
                  const mineCountSelectDisplay = document.querySelector(
                    '[data-select-id="mine-count"] .selected-option'
                  );
                  if (gridSizeSelectDisplay)
                    gridSizeSelectDisplay.textContent = `${minesState.gridSize}x${minesState.gridSize}`;
                  if (mineCountSelectDisplay)
                    mineCountSelectDisplay.textContent =
                      minesState.mineCount.toString();

                  renderMinesGrid();
                  if (minesBetSuggestion) minesBetSuggestion.textContent = "";
                  const consoleDiv = minesConsoleOutput?.querySelector("div");
                  if (consoleDiv) consoleDiv.innerHTML = "";

                  if (minesActionsInitial) {
                    minesActionsInitial.classList.remove("hidden");
                    minesActionsInitial.classList.add("flex");
                  }
                  if (minesGetAnotherBtn)
                    minesGetAnotherBtn.classList.add("hidden");

                  if (FEATURE_FLAGS.enableBetStep) {
                    if (minesGetBetBtn) minesGetBetBtn.style.display = "";
                    if (minesGetBetBtn) minesGetBetBtn.disabled = false;
                    if (minesGetBetBtn)
                      minesGetBetBtn.classList.remove("btn-disabled");

                    if (minesGetSignalBtn) minesGetSignalBtn.disabled = true;
                    if (minesGetSignalBtn)
                      minesGetSignalBtn.classList.add("btn-disabled");
                    if (minesGetSignalBtn)
                      minesGetSignalBtn.classList.remove(
                        "bg-green-600",
                        "text-black",
                        "hover:bg-green-500"
                      );
                  } else {
                    if (minesGetBetBtn) minesGetBetBtn.style.display = "none";
                    if (minesGetSignalBtn) minesGetSignalBtn.disabled = false;
                    if (minesGetSignalBtn)
                      minesGetSignalBtn.classList.remove("btn-disabled");
                    if (minesGetSignalBtn)
                      minesGetSignalBtn.classList.add(
                        "bg-green-600",
                        "text-black",
                        "hover:bg-green-500",
                        "w-full"
                      );
                  }
                }
                // --- Penalty Reset ---
                function resetPenaltyGame() {
                  penaltyTargetZones.forEach((zone) => {
                    zone.classList.remove("highlight");
                    zone.style.transform = "";
                  });
                  if (penaltyBetSuggestion)
                    penaltyBetSuggestion.textContent = "";
                  penaltySignalCountInRound = 0;
                  const consoleDiv = penaltyConsoleOutput?.querySelector("div");
                  if (consoleDiv) consoleDiv.innerHTML = "";

                  if (penaltyActionsInitial) {
                    penaltyActionsInitial.classList.remove("hidden");
                    penaltyActionsInitial.classList.add("flex");
                  }
                  if (penaltyStartNewGameBtn)
                    penaltyStartNewGameBtn.classList.add("hidden");

                  if (FEATURE_FLAGS.enableBetStep) {
                    if (penaltyGetBetBtn) penaltyGetBetBtn.style.display = "";
                    if (penaltyGetBetBtn) penaltyGetBetBtn.disabled = false;
                    if (penaltyGetBetBtn)
                      penaltyGetBetBtn.classList.remove("btn-disabled");

                    if (penaltyGetSignalBtn)
                      penaltyGetSignalBtn.disabled = true;
                    if (penaltyGetSignalBtn)
                      penaltyGetSignalBtn.classList.add("btn-disabled");
                    if (penaltyGetSignalBtn)
                      penaltyGetSignalBtn.classList.remove(
                        "bg-green-600",
                        "text-black",
                        "hover:bg-green-500"
                      );
                  } else {
                    if (penaltyGetBetBtn)
                      penaltyGetBetBtn.style.display = "none";
                    if (penaltyGetSignalBtn)
                      penaltyGetSignalBtn.disabled = false;
                    if (penaltyGetSignalBtn)
                      penaltyGetSignalBtn.classList.remove("btn-disabled");
                    if (penaltyGetSignalBtn)
                      penaltyGetSignalBtn.classList.add(
                        "bg-green-600",
                        "text-black",
                        "hover:bg-green-500",
                        "w-full"
                      );
                  }
                }
                // --- Apple Reset ---
                function resetAppleGame() {
                  if (appleSignalDisplay) appleSignalDisplay.textContent = "#";
                  if (appleSignalDisplay)
                    appleSignalDisplay.classList.remove(
                      "number-signal-display"
                    );
                  if (appleBetSuggestion) appleBetSuggestion.textContent = "";
                  appleSignalCountInRound = 0;
                  const consoleDiv = appleConsoleOutput?.querySelector("div");
                  if (consoleDiv) consoleDiv.innerHTML = "";

                  if (appleActionsInitial) {
                    appleActionsInitial.classList.remove("hidden");
                    appleActionsInitial.classList.add("flex");
                  }
                  if (appleStartNewGameBtn)
                    appleStartNewGameBtn.classList.add("hidden");

                  if (FEATURE_FLAGS.enableBetStep) {
                    if (appleGetBetBtn) appleGetBetBtn.style.display = "";
                    if (appleGetBetBtn) appleGetBetBtn.disabled = false;
                    if (appleGetBetBtn)
                      appleGetBetBtn.classList.remove("btn-disabled");

                    if (appleGetSignalBtn) appleGetSignalBtn.disabled = true;
                    if (appleGetSignalBtn)
                      appleGetSignalBtn.classList.add("btn-disabled");
                    if (appleGetSignalBtn)
                      appleGetSignalBtn.classList.remove(
                        "bg-green-600",
                        "text-black",
                        "hover:bg-green-500"
                      );
                  } else {
                    if (appleGetBetBtn) appleGetBetBtn.style.display = "none";
                    if (appleGetSignalBtn) appleGetSignalBtn.disabled = false;
                    if (appleGetSignalBtn)
                      appleGetSignalBtn.classList.remove("btn-disabled");
                    if (appleGetSignalBtn)
                      appleGetSignalBtn.classList.add(
                        "bg-green-600",
                        "text-black",
                        "hover:bg-green-500",
                        "w-full"
                      );
                  }
                }
                // --- Chicken Reset ---
                function resetChickenGame(forceRedraw = true) {
                  // Added optional flag
                  const difficultySelectDisplay = document.querySelector(
                    '[data-select-id="chicken-difficulty"] .selected-option'
                  );
                  if (difficultySelectDisplay) {
                    // Translate difficulty state back for display
                    let displayDifficulty = chickenState.difficulty;
                    if (chickenState.difficulty === "Easy")
                      displayDifficulty = "Fácil";
                    else if (chickenState.difficulty === "Medium")
                      displayDifficulty = "Medio";
                    else if (chickenState.difficulty === "Hard")
                      displayDifficulty = "Difícil";
                    else if (chickenState.difficulty === "Hardcore")
                      displayDifficulty = "Extremo";
                    difficultySelectDisplay.textContent = displayDifficulty;
                  }

                  chickenState.currentStep = 0;
                  renderChickenStoves(forceRedraw); // Use flag here
                  if (chickenBetSuggestion)
                    chickenBetSuggestion.textContent = "";
                  const consoleDiv = chickenConsoleOutput?.querySelector("div");
                  if (consoleDiv) consoleDiv.innerHTML = "";

                  if (chickenActionsInitial) {
                    chickenActionsInitial.classList.remove("hidden");
                    chickenActionsInitial.classList.add("flex");
                  }
                  if (chickenGetAnotherBtn)
                    chickenGetAnotherBtn.classList.add("hidden");

                  if (FEATURE_FLAGS.enableBetStep) {
                    if (chickenGetBetBtn) chickenGetBetBtn.style.display = "";
                    if (chickenGetBetBtn) chickenGetBetBtn.disabled = false;
                    if (chickenGetBetBtn)
                      chickenGetBetBtn.classList.remove("btn-disabled");

                    if (chickenGetSignalBtn)
                      chickenGetSignalBtn.disabled = true;
                    if (chickenGetSignalBtn)
                      chickenGetSignalBtn.classList.add("btn-disabled");
                    if (chickenGetSignalBtn)
                      chickenGetSignalBtn.classList.remove(
                        "bg-green-600",
                        "text-black",
                        "hover:bg-green-500"
                      );
                  } else {
                    if (chickenGetBetBtn)
                      chickenGetBetBtn.style.display = "none";
                    if (chickenGetSignalBtn)
                      chickenGetSignalBtn.disabled = false;
                    if (chickenGetSignalBtn)
                      chickenGetSignalBtn.classList.remove("btn-disabled");
                    if (chickenGetSignalBtn)
                      chickenGetSignalBtn.classList.add(
                        "bg-green-600",
                        "text-black",
                        "hover:bg-green-500",
                        "w-full"
                      );
                  }
                }
                // --- Slot Reset (Generic for all slots) ---
                function resetSlotGame() {
                  const gameScreen =
                    document.getElementById("game-screen-slot");
                  if (!gameScreen) return;

                  const slotNumber = gameScreen.querySelector(".slot-number");
                  const slotBetSuggestion = gameScreen.querySelector(
                    ".bet-suggestion-text"
                  );
                  const slotConsoleOutput =
                    gameScreen.querySelector(".game-console");
                  const slotActionsInitial = gameScreen.querySelector(
                    ".slot-actions-initial"
                  );
                  const slotGetAnotherBtn = gameScreen.querySelector(
                    ".slot-get-another-btn"
                  );
                  const slotGetBetBtn =
                    gameScreen.querySelector(".slot-get-bet-btn");
                  const slotGetSignalBtn = gameScreen.querySelector(
                    ".slot-get-signal-btn"
                  );

                  if (slotNumber) slotNumber.textContent = "#";
                  if (slotBetSuggestion) slotBetSuggestion.textContent = "";
                  const consoleDiv = slotConsoleOutput?.querySelector("div");
                  if (consoleDiv) consoleDiv.innerHTML = "";

                  if (slotActionsInitial) {
                    slotActionsInitial.classList.remove("hidden");
                    slotActionsInitial.classList.add("flex");
                  }
                  if (slotGetAnotherBtn)
                    slotGetAnotherBtn.classList.add("hidden");

                  // Reset buttons based on feature flag
                  if (FEATURE_FLAGS.enableBetStep) {
                    if (slotGetBetBtn) slotGetBetBtn.style.display = "";
                    if (slotGetBetBtn) slotGetBetBtn.disabled = false;
                    if (slotGetBetBtn)
                      slotGetBetBtn.classList.remove("btn-disabled");

                    if (slotGetSignalBtn) slotGetSignalBtn.disabled = true;
                    if (slotGetSignalBtn)
                      slotGetSignalBtn.classList.add("btn-disabled");
                    if (slotGetSignalBtn)
                      slotGetSignalBtn.classList.remove(
                        "bg-green-600",
                        "text-black",
                        "hover:bg-green-500"
                      );
                  } else {
                    if (slotGetBetBtn) slotGetBetBtn.style.display = "none";
                    if (slotGetSignalBtn) slotGetSignalBtn.disabled = false;
                    if (slotGetSignalBtn)
                      slotGetSignalBtn.classList.remove("btn-disabled");
                    if (slotGetSignalBtn)
                      slotGetSignalBtn.classList.add(
                        "bg-green-600",
                        "text-black",
                        "hover:bg-green-500",
                        "w-full"
                      );
                  }
                }

                // --- Game Logic Functions (Keep logic, use T object) ---
                // Add null checks for elements inside event listeners
                if (aviatorGetBetBtn)
                  aviatorGetBetBtn.addEventListener("click", () => {
                    aviatorGetBetBtn.disabled = true;
                    aviatorGetBetBtn.classList.add("btn-disabled");
                    if (aviatorBetSuggestion)
                      aviatorBetSuggestion.textContent = T.analyzingData;
                    runConsoleSimulation(
                      aviatorConsoleOutput,
                      T.betConsoleMessages,
                      () => {
                        const minBet = CUSTOM_CONFIG?.minBet || 1;
                        const maxBet = CUSTOM_CONFIG?.maxBet || 100;
                        const currency = CUSTOM_CONFIG?.currency || "$";
                        if (aviatorBetSuggestion) {
                          aviatorBetSuggestion.textContent = T.betSuggestion
                            .replace("{minBet}", minBet)
                            .replace("{maxBet}", maxBet)
                            .replace(/{currency}/g, currency);
                        }
                        if (aviatorGetSignalBtn) {
                          aviatorGetSignalBtn.disabled = false;
                          aviatorGetSignalBtn.classList.remove("btn-disabled");
                          aviatorGetSignalBtn.classList.add(
                            "bg-green-600",
                            "text-black",
                            "hover:bg-green-500"
                          );
                        }
                      }
                    );
                  });

                if (aviatorGetSignalBtn)
                  aviatorGetSignalBtn.addEventListener("click", () => {
                    if (aviatorGetSignalBtn.disabled) return;
                    aviatorGetSignalBtn.disabled = true;
                    aviatorGetSignalBtn.classList.add("btn-disabled");
                    if (aviatorBetSuggestion)
                      aviatorBetSuggestion.textContent = T.analyzingData;

                    runConsoleSimulation(
                      aviatorConsoleOutput,
                      T.aviatorSignalConsoleMessages,
                      () => {
                        let targetMultiplier;
                        aviatorSignalCount++;
                        localStorage.setItem(
                          "aviatorSignalCount",
                          aviatorSignalCount.toString()
                        );

                        if (aviatorSignalCount <= 7 && Math.random() < 0.8) {
                          targetMultiplier = 1.1 + Math.random() * 0.9;
                        } else {
                          targetMultiplier = 1.5 + Math.random() * 8.5;
                        }
                        targetMultiplier = Math.max(1.01, targetMultiplier);

                        if (aviatorBetSuggestion)
                          aviatorBetSuggestion.textContent = "";

                        const finalMultiplierString =
                          targetMultiplier.toFixed(2);
                        if (aviatorMultiplier)
                          aviatorMultiplier.textContent = `x${finalMultiplierString}`;
                        if (aviatorMultiplier)
                          aviatorMultiplier.classList.remove(
                            "multiplier-rising"
                          );
                        if (aviatorMultiplier)
                          aviatorMultiplier.classList.add("multiplier-final");

                        if (aviatorActionsInitial)
                          aviatorActionsInitial.classList.add("hidden");
                        if (aviatorGetAnotherBtn)
                          aviatorGetAnotherBtn.classList.remove("hidden");
                      }
                    );
                  });

                if (aviatorGetAnotherBtn)
                  aviatorGetAnotherBtn.addEventListener("click", () =>
                    resetAviatorGame()
                  );

                // Mines Grid Rendering
                function renderMinesGrid() {
                  if (!minesGridContainer) return;
                  minesGridContainer.innerHTML = "";
                  const gridSize = minesState.gridSize;
                  minesGridContainer.className = `grid gap-1 sm:gap-2 w-full max-w-md aspect-square`;
                  minesGridContainer.style.gridTemplateColumns = `repeat(${gridSize}, minmax(0, 1fr))`;

                  for (let i = 0; i < gridSize * gridSize; i++) {
                    const cell = document.createElement("div");
                    cell.className =
                      "mine-cell flex items-center justify-center";
                    minesGridContainer.appendChild(cell);
                  }
                }

                if (minesGetBetBtn)
                  minesGetBetBtn.addEventListener("click", () => {
                    minesGetBetBtn.disabled = true;
                    minesGetBetBtn.classList.add("btn-disabled");
                    if (minesBetSuggestion)
                      minesBetSuggestion.textContent = T.analyzingData;
                    runConsoleSimulation(
                      minesConsoleOutput,
                      T.betConsoleMessages,
                      () => {
                        const minBet = CUSTOM_CONFIG?.minBet || 1;
                        const maxBet = CUSTOM_CONFIG?.maxBet || 100;
                        const currency = CUSTOM_CONFIG?.currency || "$";
                        if (minesBetSuggestion) {
                          minesBetSuggestion.textContent = T.betSuggestion
                            .replace("{minBet}", minBet)
                            .replace("{maxBet}", maxBet)
                            .replace(/{currency}/g, currency);
                        }
                        if (minesGetSignalBtn) {
                          minesGetSignalBtn.disabled = false;
                          minesGetSignalBtn.classList.remove("btn-disabled");
                          minesGetSignalBtn.classList.add(
                            "bg-green-600",
                            "text-black",
                            "hover:bg-green-500"
                          );
                        }
                      }
                    );
                  });

                if (minesGetSignalBtn)
                  minesGetSignalBtn.addEventListener("click", () => {
                    if (minesGetSignalBtn.disabled || !minesGridContainer)
                      return;
                    minesGetSignalBtn.disabled = true;
                    minesGetSignalBtn.classList.add("btn-disabled");
                    if (minesBetSuggestion)
                      minesBetSuggestion.textContent = T.analyzingData;

                    runConsoleSimulation(
                      minesConsoleOutput,
                      T.minesSignalConsoleMessages,
                      () => {
                        const cells =
                          minesGridContainer.querySelectorAll(".mine-cell");
                        if (cells.length === 0) return; // Should not happen if renderMinesGrid worked

                        const totalCells = cells.length;
                        const indices = Array.from(Array(totalCells).keys());
                        for (let i = indices.length - 1; i > 0; i--) {
                          const j = Math.floor(Math.random() * (i + 1));
                          [indices[i], indices[j]] = [indices[j], indices[i]];
                        }
                        const safeIndices = indices.slice(0, 5);

                        if (minesBetSuggestion)
                          minesBetSuggestion.textContent = T.signalRevealed;

                        safeIndices.forEach((index) => {
                          if (cells[index]) cells[index].classList.add("safe");
                        });

                        if (minesActionsInitial)
                          minesActionsInitial.classList.add("hidden");
                        if (minesGetAnotherBtn)
                          minesGetAnotherBtn.classList.remove("hidden");
                      }
                    );
                  });

                if (minesGetAnotherBtn)
                  minesGetAnotherBtn.addEventListener("click", () =>
                    resetMinesGame()
                  );

                // Penalty Logic
                if (penaltyGetBetBtn)
                  penaltyGetBetBtn.addEventListener("click", () => {
                    penaltyGetBetBtn.disabled = true;
                    penaltyGetBetBtn.classList.add("btn-disabled");
                    if (penaltyBetSuggestion)
                      penaltyBetSuggestion.textContent = T.analyzingData;
                    runConsoleSimulation(
                      penaltyConsoleOutput,
                      T.betConsoleMessages,
                      () => {
                        const minBet = CUSTOM_CONFIG?.minBet || 1;
                        const maxBet = CUSTOM_CONFIG?.maxBet || 100;
                        const currency = CUSTOM_CONFIG?.currency || "$";
                        if (penaltyBetSuggestion) {
                          penaltyBetSuggestion.textContent = T.betSuggestion
                            .replace("{minBet}", minBet)
                            .replace("{maxBet}", maxBet)
                            .replace(/{currency}/g, currency);
                        }
                        if (penaltyGetSignalBtn) {
                          penaltyGetSignalBtn.disabled = false;
                          penaltyGetSignalBtn.classList.remove("btn-disabled");
                          penaltyGetSignalBtn.classList.add(
                            "bg-green-600",
                            "text-black",
                            "hover:bg-green-500"
                          );
                        }
                      }
                    );
                  });

                if (penaltyGetSignalBtn)
                  penaltyGetSignalBtn.addEventListener("click", () => {
                    if (
                      penaltyGetSignalBtn.disabled ||
                      penaltyTargetZones.length === 0
                    )
                      return;
                    penaltyGetSignalBtn.disabled = true;
                    if (penaltyBetSuggestion)
                      penaltyBetSuggestion.textContent = T.analyzingData;

                    runConsoleSimulation(
                      penaltyConsoleOutput,
                      T.penaltySignalConsoleMessages,
                      () => {
                        penaltyTargetZones.forEach((zone) => {
                          zone.classList.remove("highlight");
                          zone.style.transform = "";
                        });

                        const randomIndex = Math.floor(
                          Math.random() * penaltyTargetZones.length
                        );
                        const targetZoneElement =
                          penaltyTargetZones[randomIndex];

                        if (targetZoneElement) {
                          targetZoneElement.classList.add("highlight");
                          if (targetZoneElement.dataset.zone === "3") {
                            targetZoneElement.style.transform =
                              "translateX(-50%) scale(1.1)";
                          } else {
                            targetZoneElement.style.transform = "scale(1.1)";
                          }

                          penaltySignalCountInRound++;
                          const signalsLeft = Math.max(
                            0,
                            5 - penaltySignalCountInRound
                          ); // Ensure not negative

                          if (penaltyBetSuggestion) {
                            penaltyBetSuggestion.textContent =
                              T.signalTargetZoneWithCount
                                .replace(
                                  "{zone}",
                                  targetZoneElement.dataset.zone
                                )
                                .replace("{count}", signalsLeft);
                          }

                          if (
                            penaltySignalCountInRound === 1 &&
                            penaltyStartNewGameBtn
                          ) {
                            penaltyStartNewGameBtn.classList.remove("hidden");
                          }

                          if (signalsLeft <= 0) {
                            // Keep disabled, handled by "Start New Game"
                            penaltyGetSignalBtn.classList.add("btn-disabled");
                          } else {
                            penaltyGetSignalBtn.disabled = false; // Re-enable for next shot
                          }
                        } else {
                          if (penaltyBetSuggestion)
                            penaltyBetSuggestion.textContent = "Error"; // Basic error
                          penaltyGetSignalBtn.disabled = false; // Re-enable on error
                        }
                      }
                    );
                  });

                if (penaltyStartNewGameBtn)
                  penaltyStartNewGameBtn.addEventListener("click", () =>
                    resetPenaltyGame()
                  );

                // Apple Logic
                if (appleGetBetBtn)
                  appleGetBetBtn.addEventListener("click", () => {
                    appleGetBetBtn.disabled = true;
                    appleGetBetBtn.classList.add("btn-disabled");
                    if (appleBetSuggestion)
                      appleBetSuggestion.textContent = T.analyzingData;
                    runConsoleSimulation(
                      appleConsoleOutput,
                      T.betConsoleMessages,
                      () => {
                        const minBet = CUSTOM_CONFIG?.minBet || 1;
                        const maxBet = CUSTOM_CONFIG?.maxBet || 100;
                        const currency = CUSTOM_CONFIG?.currency || "$";
                        if (appleBetSuggestion) {
                          appleBetSuggestion.textContent = T.betSuggestion
                            .replace("{minBet}", minBet)
                            .replace("{maxBet}", maxBet)
                            .replace(/{currency}/g, currency);
                        }
                        if (appleGetSignalBtn) {
                          appleGetSignalBtn.disabled = false;
                          appleGetSignalBtn.classList.remove("btn-disabled");
                          appleGetSignalBtn.classList.add(
                            "bg-green-600",
                            "text-black",
                            "hover:bg-green-500"
                          );
                        }
                      }
                    );
                  });

                if (appleGetSignalBtn)
                  appleGetSignalBtn.addEventListener("click", () => {
                    if (appleGetSignalBtn.disabled) return;
                    appleGetSignalBtn.disabled = true;
                    if (appleBetSuggestion)
                      appleBetSuggestion.textContent = T.analyzingData;

                    runConsoleSimulation(
                      appleConsoleOutput,
                      T.appleSignalConsoleMessages,
                      () => {
                        if (appleSignalDisplay)
                          appleSignalDisplay.classList.remove(
                            "number-signal-display"
                          );

                        const finalSignal = Math.floor(Math.random() * 5) + 1; // 1 to 5
                        if (appleSignalDisplay)
                          appleSignalDisplay.textContent = finalSignal;
                        if (appleSignalDisplay)
                          appleSignalDisplay.classList.add(
                            "number-signal-display"
                          );

                        appleSignalCountInRound++;
                        const signalsLeft = Math.max(
                          0,
                          10 - appleSignalCountInRound
                        ); // 10 levels

                        if (appleBetSuggestion) {
                          appleBetSuggestion.textContent =
                            T.signalSelectRowWithCount
                              .replace("{finalSignal}", finalSignal)
                              .replace("{count}", signalsLeft);
                        }

                        if (
                          appleSignalCountInRound === 1 &&
                          appleStartNewGameBtn
                        ) {
                          appleStartNewGameBtn.classList.remove("hidden");
                        }

                        if (signalsLeft <= 0) {
                          appleGetSignalBtn.classList.add("btn-disabled");
                        } else {
                          appleGetSignalBtn.disabled = false;
                        }
                      }
                    );
                  });

                if (appleStartNewGameBtn)
                  appleStartNewGameBtn.addEventListener("click", () =>
                    resetAppleGame()
                  );

                // Chicken Logic
                function renderChickenStoves(forceRedraw = false) {
                  if (!chickenRoadTrack || !chickenIcon) return;
                  if (forceRedraw) {
                    chickenRoadTrack.innerHTML = "";
                    for (let i = 0; i < 10; i++) {
                      const stove = document.createElement("div");
                      stove.className =
                        "chicken-stove absolute w-24 h-24 rounded-md";
                      stove.style.left = `${i * STOVE_WIDTH}px`;
                      stove.style.top = "50%";
                      stove.style.transform = "translateY(-50%)";
                      chickenRoadTrack.appendChild(stove);
                    }
                  }
                  const initialChickenOffset =
                    STOVE_WIDTH * 1.5 - chickenIcon.offsetWidth / 2;
                  chickenIcon.style.left = `${initialChickenOffset}px`;
                  chickenIcon.style.transform = "translateY(-50%)";
                  chickenRoadTrack.style.transform = `translateX(0px)`;
                }

                async function animateChicken(steps) {
                  if (!chickenIcon || !chickenRoadTrack) return;
                  for (let i = 0; i < steps; i++) {
                    chickenState.currentStep++;
                    chickenIcon.style.transform =
                      "translateY(-100%) scale(1.1)";
                    await new Promise((resolve) => setTimeout(resolve, 100));
                    chickenRoadTrack.style.transform = `translateX(-${
                      chickenState.currentStep * STOVE_WIDTH
                    }px)`;
                    await new Promise((resolve) => setTimeout(resolve, 100));
                    chickenIcon.style.transform = "translateY(-50%) scale(1)";
                    await new Promise((resolve) => setTimeout(resolve, 100));

                    const newStove = document.createElement("div");
                    newStove.className =
                      "chicken-stove absolute w-24 h-24 rounded-md";
                    const lastStove = chickenRoadTrack.lastChild;
                    const newLeft =
                      (lastStove
                        ? parseFloat(lastStove.style.left)
                        : -STOVE_WIDTH) + STOVE_WIDTH;
                    newStove.style.left = `${newLeft}px`;
                    newStove.style.top = "50%";
                    newStove.style.transform = "translateY(-50%)";
                    chickenRoadTrack.appendChild(newStove);
                  }
                  if (chickenActionsInitial)
                    chickenActionsInitial.classList.add("hidden");
                  if (chickenGetAnotherBtn)
                    chickenGetAnotherBtn.classList.remove("hidden");
                }

                if (chickenGetBetBtn)
                  chickenGetBetBtn.addEventListener("click", () => {
                    chickenGetBetBtn.disabled = true;
                    chickenGetBetBtn.classList.add("btn-disabled");
                    if (chickenBetSuggestion)
                      chickenBetSuggestion.textContent = T.analyzingData;
                    runConsoleSimulation(
                      chickenConsoleOutput,
                      T.betConsoleMessages,
                      () => {
                        const minBet = CUSTOM_CONFIG?.minBet || 1;
                        const maxBet = CUSTOM_CONFIG?.maxBet || 100;
                        const currency = CUSTOM_CONFIG?.currency || "$";
                        if (chickenBetSuggestion) {
                          chickenBetSuggestion.textContent = T.betSuggestion
                            .replace("{minBet}", minBet)
                            .replace("{maxBet}", maxBet)
                            .replace(/{currency}/g, currency);
                        }
                        if (chickenGetSignalBtn) {
                          chickenGetSignalBtn.disabled = false;
                          chickenGetSignalBtn.classList.remove("btn-disabled");
                          chickenGetSignalBtn.classList.add(
                            "bg-green-600",
                            "text-black",
                            "hover:bg-green-500"
                          );
                        }
                      }
                    );
                  });

                if (chickenGetSignalBtn)
                  chickenGetSignalBtn.addEventListener("click", () => {
                    if (chickenGetSignalBtn.disabled) return;
                    chickenGetSignalBtn.disabled = true;
                    chickenGetSignalBtn.classList.add("btn-disabled");
                    if (chickenBetSuggestion)
                      chickenBetSuggestion.textContent = T.analyzingData;

                    runConsoleSimulation(
                      chickenConsoleOutput,
                      T.chickenSignalConsoleMessages,
                      () => {
                        let maxSteps = 12;
                        // Use English state for logic
                        switch (chickenState.difficulty) {
                          case "Medium":
                            maxSteps = 10;
                            break;
                          case "Hard":
                            maxSteps = 8;
                            break;
                          case "Hardcore":
                            maxSteps = 4;
                            break;
                          default:
                            maxSteps = 12; // Easy
                        }
                        const signalSteps =
                          Math.floor(Math.random() * maxSteps) + 1;
                        if (chickenBetSuggestion)
                          chickenBetSuggestion.textContent =
                            T.signalClickGo.replace(
                              "{signalSteps}",
                              signalSteps
                            );
                        animateChicken(signalSteps);
                      }
                    );
                  });

                if (chickenGetAnotherBtn)
                  chickenGetAnotherBtn.addEventListener("click", () =>
                    resetChickenGame()
                  );

                // Slot Game Event Listener (using event delegation on gameView)
                gameView.addEventListener("click", (e) => {
                  const target = e.target;
                  // Check if the click happened within the slot game screen
                  const gameScreen = target.closest("#game-screen-slot");
                  if (!gameScreen) return;

                  // Get elements within the specific slot screen
                  const slotBetSuggestion = gameScreen.querySelector(
                    ".bet-suggestion-text"
                  );
                  const slotConsoleOutput =
                    gameScreen.querySelector(".game-console");
                  const slotGetSignalBtn = gameScreen.querySelector(
                    ".slot-get-signal-btn"
                  );
                  const slotNumber = gameScreen.querySelector(".slot-number");
                  const slotActionsInitial = gameScreen.querySelector(
                    ".slot-actions-initial"
                  );
                  const slotGetAnotherBtn = gameScreen.querySelector(
                    ".slot-get-another-btn"
                  );

                  // Handle "Get Bet Size" click
                  if (target.matches(".slot-get-bet-btn")) {
                    const slotGetBetBtn = target; // The button that was clicked
                    slotGetBetBtn.disabled = true;
                    slotGetBetBtn.classList.add("btn-disabled");
                    if (slotBetSuggestion)
                      slotBetSuggestion.textContent = T.analyzingData;
                    runConsoleSimulation(
                      slotConsoleOutput,
                      T.betConsoleMessages,
                      () => {
                        const minBet = CUSTOM_CONFIG?.minBet || 1;
                        const maxBet = CUSTOM_CONFIG?.maxBet || 100;
                        const currency = CUSTOM_CONFIG?.currency || "$";
                        if (slotBetSuggestion) {
                          slotBetSuggestion.textContent = T.betSuggestion
                            .replace("{minBet}", minBet)
                            .replace("{maxBet}", maxBet)
                            .replace(/{currency}/g, currency);
                        }
                        if (slotGetSignalBtn) {
                          slotGetSignalBtn.disabled = false;
                          slotGetSignalBtn.classList.remove("btn-disabled");
                          slotGetSignalBtn.classList.add(
                            "bg-green-600",
                            "text-black",
                            "hover:bg-green-500"
                          );
                        }
                      }
                    );
                  }

                  // Handle "Get Signal" click
                  if (target.matches(".slot-get-signal-btn")) {
                    if (slotGetSignalBtn.disabled) return;
                    slotGetSignalBtn.disabled = true;
                    slotGetSignalBtn.classList.add("btn-disabled");
                    if (slotBetSuggestion)
                      slotBetSuggestion.textContent = T.analyzingData;

                    runConsoleSimulation(
                      slotConsoleOutput,
                      T.slotSignalConsoleMessages,
                      () => {
                        let spinCount = 0;
                        const animationInterval = setInterval(() => {
                          spinCount = Math.floor(Math.random() * 16) + 5;
                          if (slotNumber) slotNumber.textContent = spinCount;
                        }, 100);

                        setTimeout(() => {
                          clearInterval(animationInterval);
                          const finalSpinCount =
                            Math.floor(Math.random() * 16) + 5;
                          if (slotNumber)
                            slotNumber.textContent = finalSpinCount;
                          // Use a specific translated message for slots
                          if (slotBetSuggestion)
                            slotBetSuggestion.textContent = `SEÑAL IA: GIRA ${finalSpinCount} VECES PARA BONO`;
                          if (slotActionsInitial)
                            slotActionsInitial.classList.add("hidden");
                          if (slotGetAnotherBtn)
                            slotGetAnotherBtn.classList.remove("hidden");
                        }, 2500);
                      }
                    );
                  }

                  // Handle "Get Another Signal" click
                  if (target.matches(".slot-get-another-btn")) {
                    resetSlotGame(); // Call the specific reset function for slots
                  }
                });

                // --- Chat Logic ---
                function generateRandomUsername() {
                  return `usuario_${Math.floor(Math.random() * 90000) + 10000}`; // Spanish prefix
                }
                let usedMessages = [];
                const toggleChat = (show) => {
                  // Added checks for element existence
                  if (show) {
                    if (chatWidget) chatWidget.classList.remove("hidden");
                    if (chatToggleBtn) chatToggleBtn.classList.add("hidden");
                    if (chatOverlay) chatOverlay.classList.remove("hidden");
                    if (chatMessages)
                      chatMessages.scrollTop = chatMessages.scrollHeight; // Scroll down
                  } else {
                    if (chatWidget) chatWidget.classList.add("hidden");
                    if (chatToggleBtn) chatToggleBtn.classList.remove("hidden");
                    if (chatOverlay) chatOverlay.classList.add("hidden");
                  }
                };

                const addMessageToChat = (
                  username,
                  message,
                  isUser = false
                ) => {
                  if (!chatMessages) return; // Exit if chatMessages doesn't exist
                  const messageElement = document.createElement("div");
                  messageElement.classList.add("text-sm", "break-words");

                  if (isUser) {
                    messageElement.innerHTML = `<span class="font-bold text-red-500">${username}:</span> <span class="text-red-400">${message}</span>`;
                  } else {
                    // Handle potential HTML in bot messages safely if needed, or assume it's safe
                    messageElement.innerHTML = `<span class="font-bold text-cyan-400">${username}:</span> <span>${message}</span>`;
                  }

                  chatMessages.appendChild(messageElement);

                  // Auto-scroll logic (check if near bottom before scrolling)
                  const isScrolledToBottom =
                    chatMessages.scrollHeight - chatMessages.clientHeight <=
                    chatMessages.scrollTop + 30; // Tolerance
                  if (
                    !chatWidget?.classList.contains("hidden") &&
                    isScrolledToBottom
                  ) {
                    chatMessages.scrollTop = chatMessages.scrollHeight;
                  }
                };

                const getUniqueRandomMessage = () => {
                  let availableMessages = T.fakeMessages.filter(
                    (msg) => !usedMessages.includes(msg)
                  );
                  if (availableMessages.length < 5) {
                    usedMessages = [];
                    availableMessages = T.fakeMessages;
                  }
                  const randomIndex = Math.floor(
                    Math.random() * availableMessages.length
                  );
                  const selectedMessage = availableMessages[randomIndex];
                  usedMessages.push(selectedMessage);
                  return selectedMessage;
                };

                const startChatSimulation = () => {
                  clearInterval(chatInterval); // Clear existing interval before starting a new one
                  const simulateMessage = () => {
                    // Check if T object and necessary arrays exist
                    if (!T || !T.qaPairs || !T.fakeMessages) {
                      console.error(
                        "Translation object T or required arrays missing for chat simulation."
                      );
                      return; // Stop simulation if data is missing
                    }

                    if (Math.random() < 0.25 && T.qaPairs.length > 0) {
                      // Q&A Pair
                      const qaPair =
                        T.qaPairs[Math.floor(Math.random() * T.qaPairs.length)];
                      const questionUser = generateRandomUsername();
                      addMessageToChat(questionUser, qaPair.q);

                      setTimeout(() => {
                        const answerUser = generateRandomUsername();
                        // Ensure qaPair.a exists
                        const answerText = qaPair.a
                          ? `<span class="font-bold text-cyan-400">@${questionUser}</span> ${qaPair.a}`
                          : "...";
                        addMessageToChat(answerUser, answerText);
                      }, Math.random() * 10000 + 5000); // 5-15 sec delay
                    } else if (T.fakeMessages.length > 0) {
                      // Regular fake message
                      const username = generateRandomUsername();
                      const message = getUniqueRandomMessage();
                      addMessageToChat(username, message);
                    } else {
                      // No messages available, maybe stop or wait longer
                      console.warn(
                        "No fake messages available for chat simulation."
                      );
                    }

                    // Schedule next message only if messages were available
                    if (T.qaPairs.length > 0 || T.fakeMessages.length > 0) {
                      const nextInterval = Math.random() * 8000 + 3000; // 3-11 seconds
                      // Use setTimeout instead of setInterval inside the loop
                      chatInterval = setTimeout(simulateMessage, nextInterval);
                    }
                  };
                  // Start the first message simulation after a brief delay
                  setTimeout(simulateMessage, Math.random() * 2000 + 1000); // 1-3 sec initial delay
                };

                let user = {
                  username: localStorage.getItem("ai_predictor_username"),
                  messageCount: parseInt(
                    localStorage.getItem("ai_predictor_msg_count") || "0"
                  ), // Provide default "0"
                };
                if (!user.username) {
                  user.username = `usuario_${
                    Math.floor(Math.random() * 90000) + 10000
                  }`; // Spanish prefix
                  localStorage.setItem("ai_predictor_username", user.username);
                }
                const checkUserBlock = () => {
                  const messageLimit = 2;
                  // Add null checks for chat elements
                  if (!chatInput || !chatSendBtn) return;

                  if (user.messageCount >= messageLimit) {
                    chatInput.disabled = true;
                    chatSendBtn.disabled = true;
                    chatInput.placeholder = T.chatLimitReached;
                    // Ensure disabled styles are applied correctly
                    chatSendBtn.classList.add(
                      "disabled:bg-gray-600",
                      "disabled:cursor-not-allowed"
                    );
                  } else {
                    chatInput.disabled = false;
                    chatSendBtn.disabled = false;
                    chatInput.placeholder = T.chatPlaceholder;
                    chatSendBtn.classList.remove(
                      "disabled:bg-gray-600",
                      "disabled:cursor-not-allowed"
                    );
                  }
                };
                const handleUserMessage = () => {
                  if (!chatInput || chatInput.disabled) return; // Check if input exists and is enabled
                  const message = chatInput.value.trim();
                  if (!message) return; // Don't send empty

                  addMessageToChat(user.username, message, true);
                  chatInput.value = "";

                  const currentMessageIndex = user.messageCount;
                  user.messageCount++;
                  localStorage.setItem(
                    "ai_predictor_msg_count",
                    user.messageCount.toString()
                  );

                  // Simulate reply only if within bounds and replies exist
                  if (
                    T.userReplies &&
                    currentMessageIndex < T.userReplies.length
                  ) {
                    setTimeout(() => {
                      const reply = T.userReplies[currentMessageIndex].replace(
                        "{username}",
                        user.username
                      );
                      addMessageToChat("Asistente_IA", reply); // Spanish bot name
                    }, Math.random() * 3000 + 2000); // 2-5 sec delay
                  }

                  checkUserBlock(); // Re-check block status
                };

                // --- Stats Update ---
                const statsConfig = {
                  "stats-aviator": {
                    baseSignals: 500,
                    rangeSignals: 500,
                    baseWinRate: 95,
                    rangeWinRate: 3,
                  },
                  "stats-mines": {
                    baseSignals: 300,
                    rangeSignals: 400,
                    baseWinRate: 85,
                    rangeWinRate: 7,
                  },
                  "stats-penalty": {
                    baseSignals: 100,
                    rangeSignals: 100,
                    baseWinRate: 87,
                    rangeWinRate: 8,
                  },
                  "stats-apple": {
                    baseSignals: 400,
                    rangeSignals: 200,
                    baseWinRate: 90,
                    rangeWinRate: 5,
                  },
                  "stats-chicken": {
                    baseSignals: 400,
                    rangeSignals: 200,
                    baseWinRate: 90,
                    rangeWinRate: 5,
                  },
                  "stats-vip": {
                    baseSignals: 1000,
                    rangeSignals: 1000,
                    baseWinRate: 98,
                    rangeWinRate: 1,
                  },
                  "stats-slot": {
                    baseSignals: 1200,
                    rangeSignals: 800,
                    baseWinRate: 97,
                    rangeWinRate: 2,
                  },
                };
                function updateSignalStats() {
                  document.querySelectorAll('[id^="stats-"]').forEach((p) => {
                    const id = p.id;
                    let configKey = id;
                    if (id.startsWith("stats-slot-")) {
                      configKey = "stats-slot";
                    }
                    const config = statsConfig[configKey];

                    if (config) {
                      const signals =
                        config.baseSignals +
                        Math.floor(Math.random() * config.rangeSignals);
                      const winRate = (
                        config.baseWinRate +
                        Math.random() * config.rangeWinRate
                      ).toFixed(1);
                      // Use translated labels
                      p.innerHTML = `${T.signalsPerSec} <span class="text-green-400">${signals}</span><br>${T.successRate} <span class="font-bold text-lime-300">${winRate}%</span>`;
                    } else {
                      p.innerHTML = T.loadingData;
                    }
                  });
                }

                // --- Live Winners Feed ---
                const liveFeedContainer = document.getElementById(
                  "live-feed-container"
                );
                const winnersData = [
                  // Keep data structure, icon URLs are language independent
                  {
                    game: "aviator",
                    icon: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQqBdX8SuaC1Ws7ZYuCVQstQ4qRi9A_3SWujg&s",
                  },
                  {
                    game: "mines",
                    icon: "https://rotativka.com/en/wp-content/uploads/sites/3/2021/06/Mines-Demo.jpg",
                  },
                  {
                    game: "penalty",
                    icon: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcThYP5CGxc52hWd4ToMHI8MIJhun5BEjHh5LQ&s",
                  },
                  {
                    game: "apple",
                    icon: "https://play-lh.googleusercontent.com/ezAY-TvV3PlhYWLs8k8czRjWWSdBwFtPrw72fNpS8p6wByC0xBG-Dgt0K5ojieZXrg",
                  }, // Placeholder
                  {
                    game: "chicken",
                    icon: "https://cdn6.aptoide.com/imgs/1/0/2/1023a04c18a7a91673200703af12a58f_icon.png",
                  },
                ];
                let winnersFeed = [];
                const MAX_WINNERS_IN_FEED = 20;

                function createWinnerElement(winner) {
                  const div = document.createElement("div");
                  // Use original LTR margin class
                  div.className =
                    "winner-item flex-shrink-0 flex items-center bg-gray-900/50 p-2 rounded-md w-52";
                  div.innerHTML = `
                       <img src="${
                         winner.icon
                       }" class="w-10 h-10 rounded-md object-cover mr-4"> <div class="flex flex-col text-xs overflow-hidden">
                           <span class="text-gray-200 font-bold truncate">${
                             winner.user
                           }</span>
                           <span class="font-bold text-lime-300 text-sm">${
                             winner.amount
                           } ${CUSTOM_CONFIG?.currency || "$"}</span>
                       </div>
                   `;
                  return div;
                }

                function generateWinner() {
                  const gameData =
                    winnersData[Math.floor(Math.random() * winnersData.length)];
                  const user = generateRandomUsername(); // Use Spanish prefix if desired
                  const baseAmount =
                    Math.round((Math.random() * 8000 + 1000) / 100) * 100; // 1000-9000
                  const amount =
                    baseAmount * (CUSTOM_CONFIG?.winnerMultiplier || 1);
                  return { icon: gameData.icon, user: user, amount: amount };
                }

                function renderWinnersFeed() {
                  if (!liveFeedContainer) return;
                  liveFeedContainer.innerHTML = "";
                  winnersFeed.forEach((winner) => {
                    const element = createWinnerElement(winner);
                    element.style.animation = "none"; // No animation on initial render
                    liveFeedContainer.appendChild(element);
                  });
                }

                function addNewWinner() {
                  if (!liveFeedContainer) return; // Stop if container missing
                  const newWinner = generateWinner();
                  winnersFeed.unshift(newWinner);
                  if (winnersFeed.length > MAX_WINNERS_IN_FEED) {
                    winnersFeed.pop();
                  }

                  const newElement = createWinnerElement(newWinner);
                  liveFeedContainer.prepend(newElement); // Add with animation

                  if (liveFeedContainer.children.length > MAX_WINNERS_IN_FEED) {
                    liveFeedContainer.lastChild?.remove(); // Remove oldest DOM element (added optional chaining)
                  }

                  const randomDelay = Math.random() * 20000 + 10000; // 10-30 seconds
                  // Use setTimeout to schedule next call, don't rely on setInterval inside
                  setTimeout(addNewWinner, randomDelay);
                }

                // --- PROMO MODAL ---
                const promoModal = document.getElementById("promoModal");
                const closePromoModalBtn =
                  document.getElementById("closePromoModalBtn");
                const openLotteryFromPromoBtn = document.getElementById(
                  "openLotteryFromPromoBtn"
                );
                let promoInterval;

                function showPromoModal() {
                  if (!FEATURE_FLAGS.enableLottery || !promoModal) return;
                  // Prevent showing if other critical modals are open
                  const otherModalOpen =
                    !lotteryModal?.classList.contains("hidden") ||
                    !infoModal?.classList.contains("hidden") ||
                    !accessModal?.classList.contains("hidden");
                  if (otherModalOpen) return;

                  promoModal.classList.remove("hidden");
                  // document.body.style.overflow = "hidden"; // Optional
                }
                function closePromoModal() {
                  if (promoModal) {
                    promoModal.classList.add("hidden");
                    // document.body.style.overflow = ""; // Optional
                  }
                }
                function startPromoInterval() {
                  if (!FEATURE_FLAGS.enableLottery) return;
                  clearInterval(promoInterval);
                  promoInterval = setInterval(() => {
                    // Check app visibility and absence of other modals more robustly
                    const appVisible =
                      !appContainer?.classList.contains("hidden");
                    const lotteryHidden =
                      lotteryModal?.classList.contains("hidden");
                    const infoHidden = infoModal?.classList.contains("hidden");
                    const accessHidden =
                      accessModal?.classList.contains("hidden");
                    const promoHidden =
                      promoModal?.classList.contains("hidden");

                    if (
                      appVisible &&
                      lotteryHidden &&
                      infoHidden &&
                      accessHidden &&
                      promoHidden
                    ) {
                      showPromoModal();
                    }
                  }, 300000); // 5 minutes
                }
                if (closePromoModalBtn)
                  closePromoModalBtn.addEventListener("click", closePromoModal);
                if (promoModal)
                  promoModal.addEventListener("click", (e) => {
                    if (e.target === promoModal) closePromoModal();
                  });
                if (openLotteryFromPromoBtn)
                  openLotteryFromPromoBtn.addEventListener("click", () => {
                    closePromoModal();
                    // Ensure lottery modal function exists before calling
                    if (typeof openLotteryModal === "function") {
                      openLotteryModal();
                    } else {
                      console.error("openLotteryModal function not defined");
                    }
                  });

                // --- LOTTERY SCRIPT ---
                // (Keep lottery JS logic as is, it uses the T object for text)
                const lotteryBtn = document.getElementById("lotteryBtn");
                const lotteryModal = document.getElementById("lotteryModal");
                const closeLotteryModalBtn = document.getElementById(
                  "closeLotteryModalBtn"
                );
                const lotteryCodeInput = document.getElementById("lotteryCode");
                const spinBtn = document.getElementById("spinBtn");
                const spinAgainBtn = document.getElementById("spinAgainBtn");
                const lotteryErrorMessage = document.getElementById(
                  "lotteryErrorMessage"
                );
                const wheelContainer =
                  document.getElementById("wheel-container");
                const canvas = document.getElementById("wheelCanvas");
                const confettiCanvas =
                  document.getElementById("confettiCanvas");
                const lotteryControls =
                  document.getElementById("lottery-controls");
                const lotteryResult = document.getElementById("lottery-result");
                const lotteryResultText =
                  document.getElementById("lotteryResultText");
                const ctx = canvas ? canvas.getContext("2d") : null;
                const confettiCtx = confettiCanvas
                  ? confettiCanvas.getContext("2d")
                  : null;

                const infoBtn = document.getElementById("infoBtn");
                const infoModal = document.getElementById("infoModal");
                const closeInfoModalBtn =
                  document.getElementById("closeInfoModalBtn");

                // Check essential lottery elements
                if (
                  canvas &&
                  ctx &&
                  wheelContainer &&
                  lotteryModal &&
                  confettiCanvas &&
                  confettiCtx &&
                  prizes &&
                  prizes.length > 0 &&
                  lotteryCodes
                ) {
                  const numSegments = prizes.length;
                  const segmentAngle = (2 * Math.PI) / numSegments;
                  let currentRotation = 0;
                  let isSpinning = false;
                  let shimmerAngle = 0;
                  let animationFrameId; // For idle
                  let spinAnimationId; // For spin
                  let centerX, centerY, radius;
                  let confettiParticles = [];
                  let confettiAnimationId;

                  function resizeCanvas() {
                    if (!wheelContainer || !canvas || !confettiCanvas) return;
                    const size = Math.min(
                      wheelContainer.clientWidth,
                      wheelContainer.clientHeight
                    );
                    canvas.width = size;
                    canvas.height = size;
                    const modalBody = lotteryModal.querySelector(
                      ".bg-\\[\\#0d0d0d\\]"
                    );
                    if (modalBody) {
                      confettiCanvas.width = modalBody.clientWidth;
                      confettiCanvas.height = modalBody.clientHeight;
                    } else {
                      confettiCanvas.width = lotteryModal.clientWidth;
                      confettiCanvas.height = lotteryModal.clientHeight;
                    }
                    centerX = canvas.width / 2;
                    centerY = canvas.height / 2;
                    radius = Math.max(0, canvas.width / 2 - 5);
                    drawWheel();
                  }

                  function drawWheel() {
                    if (!ctx || !canvas || prizes.length === 0) return;
                    ctx.clearRect(0, 0, canvas.width, canvas.height);
                    ctx.save();
                    ctx.translate(centerX, centerY);
                    ctx.rotate(currentRotation);

                    for (let i = 0; i < numSegments; i++) {
                      const startAngle = i * segmentAngle;
                      const endAngle = startAngle + segmentAngle;
                      ctx.beginPath();
                      ctx.moveTo(0, 0);
                      ctx.arc(0, 0, radius, startAngle, endAngle);
                      ctx.closePath();
                      ctx.fillStyle = prizes[i]?.color || "#333";
                      ctx.fill();

                      if (prizes[i]?.animatedBorder) {
                        const gradient = ctx.createConicGradient(
                          shimmerAngle + startAngle,
                          0,
                          0
                        );
                        gradient.addColorStop(0, "#FBBF24");
                        gradient.addColorStop(0.25, "#FDE68A");
                        gradient.addColorStop(0.5, "#FBBF24");
                        gradient.addColorStop(0.75, "#FFFFFF");
                        gradient.addColorStop(1, "#FBBF24");
                        ctx.strokeStyle = gradient;
                        ctx.lineWidth = 6;
                        ctx.stroke();
                      } else {
                        ctx.strokeStyle = "#4B5563";
                        ctx.lineWidth = 2;
                        ctx.stroke();
                      }

                      ctx.save();
                      ctx.rotate(startAngle + segmentAngle / 2);
                      ctx.textAlign = "center";
                      ctx.textBaseline = "middle";
                      ctx.fillStyle = prizes[i]?.textColor || "#FFF";
                      const fontSize = Math.max(
                        10,
                        Math.min(16, Math.floor(radius / 14))
                      );
                      ctx.font = `bold ${fontSize}px "Share Tech Mono", monospace`; // Keep mono for wheel consistency
                      const text = prizes[i]?.text || `Prize ${i + 1}`;
                      const lines = text.split("\n");
                      const textRadius = radius * 0.65;
                      const lineHeight = fontSize * 1.2;
                      for (let j = 0; j < lines.length; j++) {
                        ctx.fillText(
                          lines[j],
                          textRadius,
                          (j - (lines.length - 1) / 2) * lineHeight
                        );
                      }
                      ctx.restore();
                    }
                    ctx.restore();
                  }

                  function idleLoop() {
                    shimmerAngle += 0.03;
                    drawWheel();
                    if (!isSpinning)
                      animationFrameId = requestAnimationFrame(idleLoop);
                  }

                  function startConfetti() {
                    if (!confettiCanvas || !confettiCtx) return;
                    const colors = [
                      "#fde047",
                      "#f97316",
                      "#22c55e",
                      "#3b82f6",
                      "#a855f7",
                      "#ec4899",
                    ];
                    confettiParticles = [];
                    for (let i = 0; i < 150; i++) {
                      confettiParticles.push({
                        x: confettiCanvas.width / 2,
                        y: confettiCanvas.height / 2,
                        radius: Math.random() * 3 + 2,
                        color:
                          colors[Math.floor(Math.random() * colors.length)],
                        vx: (Math.random() - 0.5) * 25,
                        vy: (Math.random() - 0.5) * 25,
                        alpha: 1,
                      });
                    }
                    function animateConfetti() {
                      if (!confettiCtx || !confettiCanvas) return;
                      confettiCtx.clearRect(
                        0,
                        0,
                        confettiCanvas.width,
                        confettiCanvas.height
                      );
                      confettiParticles.forEach((p, index) => {
                        p.x += p.vx;
                        p.y += p.vy;
                        p.vy += 0.4;
                        p.alpha -= 0.008;
                        if (p.alpha <= 0 || p.y > confettiCanvas.height) {
                          confettiParticles.splice(index, 1);
                        } else {
                          confettiCtx.globalAlpha = p.alpha;
                          confettiCtx.beginPath();
                          confettiCtx.arc(p.x, p.y, p.radius, 0, Math.PI * 2);
                          confettiCtx.fillStyle = p.color;
                          confettiCtx.fill();
                          confettiCtx.globalAlpha = 1;
                        }
                      });
                      if (confettiParticles.length > 0)
                        confettiAnimationId =
                          requestAnimationFrame(animateConfetti);
                    }
                    cancelAnimationFrame(confettiAnimationId);
                    animateConfetti();
                  }

                  function spinWheel() {
                    if (isSpinning || prizes.length === 0) return;
                    const code = lotteryCodeInput?.value.trim();
                    if (!code) {
                      if (lotteryErrorMessage)
                        lotteryErrorMessage.textContent =
                          "Por favor, introduce el código.";
                      const modalBody = lotteryModal.querySelector(
                        ".bg-\\[\\#0d0d0d\\]"
                      );
                      if (modalBody) {
                        modalBody.classList.add("shake");
                        setTimeout(
                          () => modalBody.classList.remove("shake"),
                          500
                        );
                      }
                      return;
                    }
                    let usedCodes = JSON.parse(
                      sessionStorage.getItem("usedLotteryCodes") || "[]"
                    );
                    if (usedCodes.includes(code)) {
                      if (lotteryErrorMessage)
                        lotteryErrorMessage.textContent =
                          "Este código ya fue usado.";
                      return;
                    }
                    if (!lotteryCodes.hasOwnProperty(code)) {
                      if (lotteryErrorMessage)
                        lotteryErrorMessage.textContent = "Código incorrecto.";
                      const modalBody = lotteryModal.querySelector(
                        ".bg-\\[\\#0d0d0d\\]"
                      );
                      if (modalBody) {
                        modalBody.classList.add("shake");
                        setTimeout(
                          () => modalBody.classList.remove("shake"),
                          500
                        );
                      }
                      return;
                    }
                    const targetPrizeIndex = lotteryCodes[code];
                    if (
                      targetPrizeIndex === undefined ||
                      targetPrizeIndex < 0 ||
                      targetPrizeIndex >= numSegments
                    ) {
                      if (lotteryErrorMessage)
                        lotteryErrorMessage.textContent =
                          "Código inválido o configuración incorrecta.";
                      return;
                    }

                    usedCodes.push(code);
                    sessionStorage.setItem(
                      "usedLotteryCodes",
                      JSON.stringify(usedCodes)
                    );
                    cancelAnimationFrame(animationFrameId);
                    if (lotteryErrorMessage)
                      lotteryErrorMessage.textContent = "";
                    isSpinning = true;
                    if (spinBtn) {
                      spinBtn.disabled = true;
                      spinBtn.classList.add(
                        "disabled:bg-gray-600",
                        "disabled:cursor-not-allowed"
                      );
                    }

                    const randomSpins = Math.floor(Math.random() * 4) + 5;
                    const targetSegmentCenterAngle =
                      targetPrizeIndex * segmentAngle + segmentAngle / 2;
                    const randomOffset =
                      Math.random() * segmentAngle * 0.6 - segmentAngle * 0.3;
                    const finalRotation =
                      2 * Math.PI * randomSpins -
                      targetSegmentCenterAngle +
                      randomOffset;
                    let start = null;
                    const duration = 6000;
                    const startRotation = currentRotation;
                    function easeOutQuint(t) {
                      return 1 + --t * t * t * t * t;
                    }

                    function animateSpin(timestamp) {
                      if (!start) start = timestamp;
                      const progress = timestamp - start;
                      const easedProgress = easeOutQuint(
                        Math.min(progress / duration, 1)
                      );
                      currentRotation =
                        startRotation +
                        (finalRotation - startRotation) * easedProgress;
                      shimmerAngle += 0.05;
                      drawWheel();
                      if (progress < duration) {
                        spinAnimationId = requestAnimationFrame(animateSpin);
                      } else {
                        isSpinning = false;
                        currentRotation %= 2 * Math.PI;
                        const adjustedRotation =
                          (currentRotation + segmentAngle / 1000) %
                          (2 * Math.PI);
                        const winningIndex =
                          Math.floor(
                            numSegments - adjustedRotation / segmentAngle
                          ) % numSegments;
                        const winningPrize = prizes[winningIndex];
                        if (lotteryControls)
                          lotteryControls.classList.add("hidden");
                        if (lotteryResultText && winningPrize?.text)
                          lotteryResultText.textContent =
                            winningPrize.text.replace(/\n/g, " ");
                        if (lotteryResult)
                          lotteryResult.classList.remove("hidden");
                        if (
                          winningPrize?.text &&
                          winningPrize.text.toUpperCase() !== "NADA" &&
                          winningPrize.text.toUpperCase() !== "NOTHING"
                        )
                          startConfetti();
                        idleLoop();
                      }
                    }
                    cancelAnimationFrame(spinAnimationId);
                    spinAnimationId = requestAnimationFrame(animateSpin);
                  }

                  function openLotteryModal() {
                    if (!lotteryModal) return;
                    lotteryModal.classList.remove("hidden");
                    resizeCanvas();
                    if (lotteryControls)
                      lotteryControls.classList.remove("hidden");
                    if (lotteryResult) lotteryResult.classList.add("hidden");
                    if (lotteryCodeInput) lotteryCodeInput.value = "";
                    if (lotteryErrorMessage)
                      lotteryErrorMessage.textContent = "";
                    if (spinBtn) {
                      spinBtn.disabled = false;
                      spinBtn.classList.remove(
                        "disabled:bg-gray-600",
                        "disabled:cursor-not-allowed"
                      );
                    }
                    cancelAnimationFrame(spinAnimationId);
                    cancelAnimationFrame(confettiAnimationId);
                    if (confettiCtx && confettiCanvas)
                      confettiCtx.clearRect(
                        0,
                        0,
                        confettiCanvas.width,
                        confettiCanvas.height
                      );
                    cancelAnimationFrame(animationFrameId);
                    idleLoop();
                  }
                  function closeLotteryModal() {
                    if (!lotteryModal) return;
                    lotteryModal.classList.add("hidden");
                    cancelAnimationFrame(animationFrameId);
                    cancelAnimationFrame(spinAnimationId);
                    cancelAnimationFrame(confettiAnimationId);
                  }
                  function handleSpinAgain() {
                    if (lotteryResult) lotteryResult.classList.add("hidden");
                    if (lotteryControls)
                      lotteryControls.classList.remove("hidden");
                    if (lotteryCodeInput) lotteryCodeInput.value = "";
                    if (lotteryErrorMessage)
                      lotteryErrorMessage.textContent = "";
                    if (spinBtn) {
                      spinBtn.disabled = false;
                      spinBtn.classList.remove(
                        "disabled:bg-gray-600",
                        "disabled:cursor-not-allowed"
                      );
                    }
                    cancelAnimationFrame(confettiAnimationId);
                    if (confettiCtx && confettiCanvas)
                      confettiCtx.clearRect(
                        0,
                        0,
                        confettiCanvas.width,
                        confettiCanvas.height
                      );
                  }

                  // Event Listeners for Lottery (with null checks)
                  if (lotteryBtn && FEATURE_FLAGS.enableLottery)
                    lotteryBtn.addEventListener("click", openLotteryModal);
                  if (closeLotteryModalBtn)
                    closeLotteryModalBtn.addEventListener(
                      "click",
                      closeLotteryModal
                    );
                  if (lotteryModal)
                    lotteryModal.addEventListener("click", (e) => {
                      if (e.target === lotteryModal) closeLotteryModal();
                    });
                  if (spinBtn) spinBtn.addEventListener("click", spinWheel);
                  if (spinAgainBtn)
                    spinAgainBtn.addEventListener("click", handleSpinAgain);
                  window.addEventListener("resize", resizeCanvas);

                  // Info Modal Listeners
                  if (infoBtn)
                    infoBtn.addEventListener("click", () => {
                      if (infoModal) infoModal.classList.remove("hidden");
                    });
                  if (closeInfoModalBtn)
                    closeInfoModalBtn.addEventListener("click", () => {
                      if (infoModal) infoModal.classList.add("hidden");
                    });
                  if (infoModal)
                    infoModal.addEventListener("click", (e) => {
                      if (e.target === infoModal)
                        infoModal.classList.add("hidden");
                    });
                } else {
                  console.error(
                    "Lottery essential elements missing or prizes/codes not loaded. Lottery disabled."
                  );
                  if (lotteryBtn) lotteryBtn.style.display = "none";
                }

                // --- General Event Listeners & Initial Calls ---
                const allCustomSelects =
                  document.querySelectorAll("[data-select-id]");

                // Activate Button Listener
                if (signalsSection)
                  signalsSection.addEventListener("click", (e) => {
                    const activateBtn = e.target.closest(".activate-btn");
                    if (activateBtn) {
                      const card = activateBtn.closest(".signal-card");
                      if (card && !card.classList.contains("locked-card")) {
                        const gameId = card.dataset.game;
                        if (gameId) showGameView(gameId);
                      }
                    }
                  });

                // Custom Select Dropdown Logic
                allCustomSelects.forEach((selectWrapper) => {
                  const trigger = selectWrapper.querySelector(
                    ".custom-select-trigger"
                  );
                  const optionsContainer = selectWrapper.querySelector(
                    ".custom-select-options"
                  );
                  const selectedDisplay =
                    trigger?.querySelector(".selected-option"); // Added check

                  if (!trigger || !optionsContainer || !selectedDisplay) return;

                  trigger.addEventListener("click", (e) => {
                    e.stopPropagation();
                    allCustomSelects.forEach((otherWrapper) => {
                      if (otherWrapper !== selectWrapper) {
                        otherWrapper
                          .querySelector(".custom-select-options")
                          ?.classList.add("hidden");
                      }
                    });
                    optionsContainer.classList.toggle("hidden");
                  });

                  optionsContainer.addEventListener("click", (e) => {
                    if (
                      e.target.tagName === "DIV" &&
                      e.target.classList.contains("p-2")
                    ) {
                      const newValue = e.target.textContent.trim();
                      selectedDisplay.textContent = newValue;
                      optionsContainer.classList.add("hidden");
                      const selectId = selectWrapper.dataset.selectId;

                      if (selectId === "grid-size") {
                        minesState.gridSize = parseInt(newValue.split("x")[0]);
                        resetMinesGame();
                      } else if (selectId === "mine-count") {
                        minesState.mineCount = parseInt(newValue);
                        resetMinesGame();
                      } else if (selectId === "chicken-difficulty") {
                        // Store English value for logic, display handled in reset
                        if (newValue === "Fácil")
                          chickenState.difficulty = "Easy";
                        else if (newValue === "Medio")
                          chickenState.difficulty = "Medium";
                        else if (newValue === "Difícil")
                          chickenState.difficulty = "Hard";
                        else if (newValue === "Extremo")
                          chickenState.difficulty = "Hardcore";
                        else chickenState.difficulty = "Easy";
                        resetChickenGame();
                      }
                    }
                  });
                });
                document.addEventListener("click", () => {
                  allCustomSelects.forEach((selectWrapper) => {
                    selectWrapper
                      .querySelector(".custom-select-options")
                      ?.classList.add("hidden");
                  });
                });

                // Modal and General Button Listeners (with null checks)
                if (openModalBtn)
                  openModalBtn.addEventListener("click", openModal);
                if (closeModalBtn)
                  closeModalBtn.addEventListener("click", closeModal);
                if (validateBtn)
                  validateBtn.addEventListener("click", handleValidation);
                if (accessCodeInput)
                  accessCodeInput.addEventListener("keyup", (e) => {
                    if (e.key === "Enter") handleValidation();
                  });
                if (accessModal)
                  accessModal.addEventListener("click", (e) => {
                    if (e.target === accessModal) closeModal();
                  });

                if (chatToggleBtn)
                  chatToggleBtn.addEventListener("click", () =>
                    toggleChat(true)
                  );
                if (chatCloseBtn)
                  chatCloseBtn.addEventListener("click", () =>
                    toggleChat(false)
                  );
                if (chatOverlay)
                  chatOverlay.addEventListener("click", () =>
                    toggleChat(false)
                  );
                if (chatSendBtn)
                  chatSendBtn.addEventListener("click", handleUserMessage);
                if (chatInput)
                  chatInput.addEventListener("keyup", (e) => {
                    if (e.key === "Enter") handleUserMessage();
                  });

                if (logoutBtn)
                  logoutBtn.addEventListener("click", () => {
                    localStorage.clear(); // Clear all local storage for this domain
                    sessionStorage.clear(); // Clear all session storage
                    clearInterval(promoInterval);
                    clearInterval(chatInterval); // Stop chat sim
                    window.location.reload();
                  });

                document
                  .querySelectorAll(".back-to-signals-btn")
                  .forEach((button) => {
                    button.addEventListener("click", showSignalsView);
                  });

                if (gameView)
                  gameView.addEventListener("click", (e) => {
                    if (e.target.matches(".i-found-game-btn")) {
                      const gameScreen = e.target.closest(".game-screen");
                      if (gameScreen) {
                        const videoSection = gameScreen.querySelector(
                          ".video-tutorial-section"
                        );
                        const predictorSection =
                          gameScreen.querySelector(".predictor-section");
                        if (videoSection && predictorSection) {
                          videoSection.classList.add("hidden");
                          predictorSection.classList.remove("hidden");
                          predictorSection.classList.add("flex");
                        }
                      }
                    }
                  });

                // Video Modal Logic (already includes checks)
                const videoModal = document.getElementById("videoModal");
                const closeVideoModalBtn =
                  document.getElementById("closeVideoModalBtn");
                const youtubePlayer = document.getElementById("youtube-player");
                const videoModalTitle =
                  document.getElementById("videoModalTitle");
                const prevVideoBtn = document.getElementById("prevVideoBtn");
                const nextVideoBtn = document.getElementById("nextVideoBtn");
                const videoCounter = document.getElementById("video-counter");
                let currentVideoList = [];
                let currentVideoIndex = 0;

                function updateVideoModal() {
                  if (!youtubePlayer || currentVideoList.length === 0) return;
                  const videoData = currentVideoList[currentVideoIndex];
                  youtubePlayer.src = videoData?.url || ""; // Added optional chaining
                  if (videoModalTitle) {
                    videoModalTitle.textContent = videoData?.title || "";
                    videoModalTitle.classList.toggle(
                      "hidden",
                      !videoData?.title
                    );
                  }
                  if (videoCounter) {
                    videoCounter.textContent = T.videoOf
                      .replace("{current}", currentVideoIndex + 1)
                      .replace("{total}", currentVideoList.length);
                  }
                  const hasMultipleVideos = currentVideoList.length > 1;
                  if (prevVideoBtn) {
                    prevVideoBtn.disabled = currentVideoIndex === 0;
                    prevVideoBtn.style.display = hasMultipleVideos
                      ? "block"
                      : "none";
                  }
                  if (nextVideoBtn) {
                    nextVideoBtn.disabled =
                      currentVideoIndex === currentVideoList.length - 1;
                    nextVideoBtn.style.display = hasMultipleVideos
                      ? "block"
                      : "none";
                  }
                  if (videoCounter)
                    videoCounter.style.display = hasMultipleVideos
                      ? "block"
                      : "none";
                }

                document
                  .querySelectorAll(".open-video-btn")
                  .forEach((button) => {
                    button.addEventListener("click", () => {
                      const videosKey = button.dataset.videosKey;
                      const gameKey = button.dataset.gameKey;
                      // Use optional chaining for safer access
                      const videoList = VIDEO_CONFIG?.[gameKey]?.[videosKey];
                      if (videoList && videoList.length > 0) {
                        currentVideoList = videoList;
                        currentVideoIndex = 0;
                        updateVideoModal();
                        if (videoModal) videoModal.classList.remove("hidden");
                      } else {
                        console.warn(
                          `No videos found for ${gameKey} -> ${videosKey}`
                        );
                      }
                    });
                  });

                const closeVideoModal = () => {
                  if (videoModal) videoModal.classList.add("hidden");
                  if (youtubePlayer) youtubePlayer.src = "";
                };
                if (closeVideoModalBtn)
                  closeVideoModalBtn.addEventListener("click", closeVideoModal);
                if (videoModal)
                  videoModal.addEventListener("click", (e) => {
                    if (e.target === videoModal) closeVideoModal();
                  });
                if (prevVideoBtn)
                  prevVideoBtn.addEventListener("click", () => {
                    if (currentVideoIndex > 0) {
                      currentVideoIndex--;
                      updateVideoModal();
                    }
                  });
                if (nextVideoBtn)
                  nextVideoBtn.addEventListener("click", () => {
                    if (currentVideoIndex < currentVideoList.length - 1) {
                      currentVideoIndex++;
                      updateVideoModal();
                    }
                  });

                // --- Initial Setup Calls ---
                checkAccessSession();
                checkUserBlock();
                startChatSimulation();
                updateSignalStats();
                setInterval(updateSignalStats, 2500); // Update stats periodically

                // Initial Winners Feed Population
                if (liveFeedContainer) {
                  winnersFeed = [];
                  for (let i = 0; i < Math.min(15, MAX_WINNERS_IN_FEED); i++) {
                    winnersFeed.push(generateWinner());
                  }
                  renderWinnersFeed();
                  setTimeout(addNewWinner, Math.random() * 5000 + 2000); // Start adding new ones
                }
              }; // End of SCRIPT_BODY

              SCRIPT_BODY(); // Execute the main script logic
            });
          </script>
        
      
    
